!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cityGMap=t():e.cityGMap=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(a){if(o[a])return o[a].exports;var i=o[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,a){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="http://js.soufunimg.com/industry/citymap/js/",t(t.s=1)}([function(e,t,o){"use strict";function a(e,t,o){if(o=o||{},!d(o))throw new Error("options is invalid");var a=o.bbox,i=o.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");a&&u(a),i&&h(i);var r={type:"Feature"};return i&&(r.id=i),a&&(r.bbox=a),r.properties=t||{},r.geometry=e,r}function i(e,t,o){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!c(e[0])||!c(e[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:e},t,o)}function r(e,t,o){if(!e)throw new Error("coordinates is required");for(var i=0;i<e.length;i++){var r=e[i];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var n=0;n<r[r.length-1].length;n++){if(0===i&&0===n&&!c(r[0][0])||!c(r[0][1]))throw new Error("coordinates must contain numbers");if(r[r.length-1][n]!==r[0][n])throw new Error("First and last Position are not equivalent.")}}return a({type:"Polygon",coordinates:e},t,o)}function n(e,t,o){if(!e)throw new Error("coordinates is required");if(e.length<2)throw new Error("coordinates must be an array of two or more positions");if(!c(e[0][1])||!c(e[0][1]))throw new Error("coordinates must contain numbers");return a({type:"LineString",coordinates:e},t,o)}function l(e,t,o){if(!e)throw new Error("coordinates is required");return a({type:"MultiLineString",coordinates:e},t,o)}function s(e,t,o){if(!e)throw new Error("coordinates is required");return a({type:"MultiPoint",coordinates:e},t,o)}function p(e,t,o){if(!e)throw new Error("coordinates is required");return a({type:"MultiPolygon",coordinates:e},t,o)}function c(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function d(e){return!!e&&e.constructor===Object}function u(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!c(e))throw new Error("bbox must only contain numbers")})}function h(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}o.d(t,"a",function(){return a}),o.d(t,"e",function(){return i}),o.d(t,"d",function(){return n}),o.d(t,"b",function(){return c}),o.d(t,"c",function(){return d})},function(e,t,o){"use strict";function a(e){var t=this;t.param=$.extend({},{map:"map",wrap:!1,maxRes:9783.9396205,minRes:.298582,scrollZoom:!0,zoom:null,city:"北京",point:null,doubleZoom:!0,rotate:0,pitch:0,mapType:j.AMap,recordStatus:!1},e),t.methods={},t.overlays={},t.tips={},t.initialize()}function i(e){this.param=$.extend({},{point:null,type:null,shape:"",size:[30,35],offset:[0,-35],image:"",textFont:"Microsoft YaHei",textStyle:"bold",textAlign:"left",fillColor:"#ff8800",fillOpacity:"0.8",outlineWidth:8,lineHighlightWiden:3,gradual:!0,clickable:!1},e),this.initialize()}function r(e){var t=this;t.opts=$.extend({},{point:null,geom:null,type:"polygon",fillColor:"#f60",fillOpacity:.5,outlineWidth:2,outlineColor:"#c80",clickable:!0},e),t.initialize()}function n(e){var t=this;t.opts=$.extend({},{point:null,geom:null,type:"polyline",lineWidth:4,lineColor:"#ff941b",lineOpacity:1,clickable:!0},e),t.initialize()}function l(e,t){var o=G.Proj.WebMercator.unproject(e[0],e[1]),a=G.Proj.WebMercator.unproject(e[0]+t,e[1]),i=G.GeodeticUtil.sphereDistance(o,a);return Math.abs(t/i)*t}function s(e){var t=this;t.opts=$.extend(!0,{baseMap:null,point:null,extent:null,showText:!0,outlineDashArray:null,outline:!1,type:"circlePolygon",outlineColor:"#778899",outlineOpacity:.4,outlineWidth:1,fillColor:"#f60",labelColor:"#ff0000",fillOpacity:.5,gradual:!1},e);t.gmap=t.opts.baseMap.gmap;t.initialize()}function p(e){var t=this;t.opts=$.extend(!0,{type:"od",baseMap:null,centerPoint:null,targetPoint:null,clickable:!0,curvature:.4,curvePosition:.5,lineWidth:4,unlineWidth:2,direction:"left",duration:4,repeatCount:1e7,shadow:!1,shadowColor:"#fff",UnlineColor:"#778899",UnlineOpacity:.8,lineColor:"#ccc",lineOpacity:.8,symbol:"arrow",symbolSize:6,symbolOnly:!0},e);t.gmap=t.opts.baseMap.gmap;t.initialize()}function c(e,t){var o=this;o.opts=$.extend(!0,{id:"",point:null,type:"mapTip",style:null,className:null,draggable:"disabled",screwed:!1,isBrokenLine:!0,innerHtml:"",position:"",offset:{top:0,bottom:0,left:0,right:0},getOffset:null,eventListener:{close:function(){},screwed:function(){},display:null,mouseover:null,mouseout:null},niceScroll:{styler:"fb",cursorcolor:"#27cce4",cursorwidth:"5",cursorborderradius:"10px",background:"#091d3d",spacebarenabled:!1,cursorborder:"0",zindex:"1000"},polylineStyle:{lineColor:"#0696eb",lineWidth:2,lineDashArray:[4]}},t),o.gMap=e,o.initialize()}function d(e){var t=this;t.opts=$.extend(!0,{baseMap:null,type:"arrow",open:!0,points:[],arrowOptions:{tailSize:0,fillColor:"#f00",fillOpacity:.8,outline:!1,clickable:!0,tailAngle:0},eventListener:{end:null}},e);var o=[];t.gmap=t.opts.baseMap.gmap;t.eventListener={drawEnd:function(){t.drawLayer.endDraw(),t.drawLayer.unlisten("drawEnd",t.eventListener.drawEnd),o=t.drawLayer._graphics[0].geom,o.length>1&&$.each(o,function(e,t){o[e]=I.Mercator.baidu(t)}),"function"==typeof t.opts.eventListener.end&&t.opts.eventListener.end(t,o)},click:function(e){"function"==typeof t.opts.eventListener.click&&t.opts.eventListener.click(e)}},this.initialize()}function u(e){var t=this;t.opts=$.extend(!0,{baseMap:null},e),t.htmls=[],t.init()}function h(e){}function f(e){var t=this;t.baseMap=e.baseMap,t.isMeasure=e.isMeasure||!1,t.isSingle=e.isSingle||!1,t.opts=$.extend(!0,{outlineColor:"#1eaaf2",outlineWidth:2,fillColor:"#1eaaf2",fillOpacity:.2},e.opts),t.callback=e.callback||{},t.open("polygon",t.opts),t.isMeasure?(t.mousemoveEvent=function(e){if("drawStart"==t.drawKey){if(t.points.length>1){var o=k(t.points);$(t.followObj).find(".tool_followTip_num").text(o.area),$(t.followObj).find(".tool_followTip_unit").text(o.unit),$(t.followObj).find(".tool_followTip_content").show()}}else $(t.followObj).find(".tool_followTip_content").hide(),$(t.followObj).find(".tool_followTip_num").text(0);var a=$(t.followObj).css("transform"),i=a.match(/\-?[0-9]+\.?[0-9]*/g);i&&$(t.followObj).css({left:e.screenX-i[4],top:e.screenY-i[5]})},t.measure()):t.bindEvent()}function m(e){var t=this;t.baseMap=e.baseMap,t.isMeasure=e.isMeasure||!1,t.isSingle=e.isSingle||!1,t.opts=$.extend(!0,{lineColor:"#64b4f9",lineWidth:2,lineCap:"round",lineJoin:"round"},e.opts),t.callback=e.callback||{},t.open("polyline",t.opts),t.isMeasure?(t.wordStyle=e.wordStyle||"left:5px;top:-12px;",t.tipStyle=e.tipStyle||"left:12px;top:-15px;",t.pointStyle=$.extend(!0,{shape:"circle",size:[10,10],offset:[0,0],outline:!0,outlineWidth:3,outlineColor:"#a48cd2",fillColor:"#fff"},e.pointStyle?e.pointStyle:{}),t.mousemoveEvent=function(e){if("drawStart"==t.drawKey&&t.points.length>1){var o=t.getPolylineLength(t.points),a=o;t.cache.lengths.length>0&&t.cache.lengths.forEach(function(e){a+=e});var i=t.unitConversion(a);$(t.followObj).find(".tool_followTip_num").text(i.value),$(t.followObj).find(".tool_followTip_unit").text(i.unit),$(t.followObj).find(".tool_followTip_content").show()}var r=$(t.followObj).css("transform"),n=r.match(/\-?[0-9]+\.?[0-9]*/g);n&&$(t.followObj).css({left:e.screenX-n[4],top:e.screenY-n[5]})},t.measure()):t.bindEvent()}function y(e){var t=this;t.type="rect",t.baseMap=e.baseMap,t.isSingle=e.isSingle||!1,t.measure=e.measure||null,t.limit=e.limit||!1,t.edit=e.edit||null,t.opts=$.extend(!0,{outlineColor:"#64b4f9",outlineWidth:2,fillColor:"#64b4f9",fillOpacity:.6},e.opts),t.callback=e.callback||{},t.open("normalrect",t.opts),t.bindEvent()}function v(e){var t=this;t.baseMap=e.baseMap,t.isSingle=e.isSingle||!1,t.isMeasure=e.isMeasure||!1,t.opts=$.extend(!0,{outlineColor:"#64b4f9",outlineWidth:2,fillColor:"#64b4f9",fillOpacity:.6},e.opts),t.callback=e.callback||{},t.open("rect",t.opts),t.bindEvent()}function g(e){var t=this;t.type="circle",t.baseMap=e.baseMap,t.limit=e.limit||!1,t.edit=e.edit||null,t.measure=e.measure||null,t.opts=$.extend(!0,{outlineColor:"#64b4f9",outlineWidth:2,fillColor:"#64b4f9",fillOpacity:.6},e.opts),t.isSingle=e.isSingle||!1,t.callback=e.callback||{},t.open("circle",t.opts),t.bindEvent()}function w(e){var t=this;t.baseMap=e.baseMap,t.gmap=e.baseMap.gmap,t.isSingle=e.isSingle,t.opts=$.extend(!0,{outlineColor:"#64b4f9",outlineWidth:0,size:[12,12],fillColor:"#64b4f9",fillOpacity:.9},e.opts),t.callback=e.callback||{},t.isOpen=!1,t.initEvent(),t.open()}function b(e,t,o){var e=e.layer?e.layer:e.graphic?e.graphic:e,t=t.layer?t.layer:t,o=o||"polygon",a=E.point(t.geom);if("polygon"==o||"rect"==o){e.geom[0].push(e.geom[0][0]);var i=E.polygon(e.geom);return(0,P.default)(a,i)}if("circle"==o)return G.ExtentUtil.contains(e.bbox,t.geom)}function x(e){var t=this;t.BaseMap=e.baseMap,t.container=$("#"+(e.id?e.id:"canvasLayer")),t.colorSet=e.colorSet||["#770000","#000000","#757575","#ff811b","#45af45","#890089","#3359de","#008a8a","#ff2d2d","#ffffff","#c0c0c0","#ffff00","#aace00","#e816e8","#269de2","#00dbce"],t.color=e.color||"#ff2d2d",t.width=e.width||1,t.offset=e.offset||[0,0],t.drawCanvas=new L({baseMap:e.baseMap}),t.callback=e.callback||{},t.init()}function L(e){var t=this;t.baseMap=e.baseMap,t.map=e.baseMap.gmap,t.option={width:1,color:"#f00"};$(t.map._container);t.mapFrame=document.getElementsByClassName("g-map-frame")[0],t.offset=$(t.map._container).offset(),t.init(),t.initEvent()}function M(e){var t=this;window.EditGraphicObj&&(window.EditGraphicObj.destory(),window.EditGraphicObj=null),t.map=e.map,t.layer=e.layer,t.graphic=e.graphic,t.isEdit=e.isEdit||!1,t.editType=e.editType||"circle",t.callback=e.callback||{},t.option=$.extend(!0,{},e.option),t.limit=$.extend(!0,{},e.limit),t.measure=e.measure||null,t.graphic.options.clickable=!0,t.pointObjs=[],t.initEvent(),t.isEdit&&t.initEditLayer(),t.layer.bind("graphicClicked",function(e){return t.isEdit?(t.isEdit=!1,t.showEditLayer(!1)):(t.isEdit=!0,t.showEditLayer(!0)),t.callback.graphicClicked&&"function"==typeof t.callback.graphicClicked&&t.callback.graphicClicked(t.isEdit,t),stopBubble(e),preventDefault(e)}),t.layer.bind("graphicOver",function(e){e.graphic.attrs.name&&(t.pointName=e.graphic.attrs.name,t.moveStatus=!0)}),t.layer.bind("graphicOut",function(e){e.graphic.attrs.name&&(t.pointName=e.graphic.attrs.name,t.moveStatus=!1)}),document.getElementsByClassName("g-map-frame")[0].addEventListener("mousedown",function(e){t.isEdit?(t.moveStatus&&(t.isStartMove=!0),t.isStartMove&&t.callback.editStart&&"function"==typeof t.callback.editStart&&t.callback.editStart(t),e.stopPropagation()):t.isStartMove=!1}),t.map.bind("mouseup",t.mouseupEvent),t.map.bind("mousemove",t.mousemoveEvent),window.EditGraphicObj=t}function k(e){var t=[];if($.each(e,function(e,o){var a=!0;$.each(t,function(e,t){o[0]==t[0]&&o[1]==t[1]&&(a=!1)}),a&&t.push(o)}),t.length<3)return{num:0,unit:"㎡",area:0};for(var o=$.map(t,function(e){var t=I.Mercator.baidu(e);return{lng:t[0],lat:t[1]}}),a=o,i=0,r=0,n=0,l=0,s=0,p=0,c=0,d=0,u=0,h=0,f=0,m=0,y=0,v=0,g=0,w=0,b=0,x=0,L=0,M=0,k=0,T=0,P=0,E=0,_=0,C=0,O=0,G=0,S=0,j=0,z=0,W=0,A=0,H=0,R=a.length,D=0;D<R;D++)0==D?(r=a[R-1].lng*Math.PI/180,n=a[R-1].lat*Math.PI/180,l=a[0].lng*Math.PI/180,s=a[0].lat*Math.PI/180,p=a[1].lng*Math.PI/180,c=a[1].lat*Math.PI/180):D==R-1?(r=a[R-2].lng*Math.PI/180,n=a[R-2].lat*Math.PI/180,l=a[R-1].lng*Math.PI/180,s=a[R-1].lat*Math.PI/180,p=a[0].lng*Math.PI/180,c=a[0].lat*Math.PI/180):(r=a[D-1].lng*Math.PI/180,n=a[D-1].lat*Math.PI/180,l=a[D].lng*Math.PI/180,s=a[D].lat*Math.PI/180,p=a[D+1].lng*Math.PI/180,c=a[D+1].lat*Math.PI/180),d=Math.cos(s)*Math.cos(l),u=Math.cos(s)*Math.sin(l),h=Math.sin(s),f=Math.cos(n)*Math.cos(r),m=Math.cos(n)*Math.sin(r),y=Math.sin(n),v=Math.cos(c)*Math.cos(p),g=Math.cos(c)*Math.sin(p),w=Math.sin(c),b=(d*d+u*u+h*h)/(d*f+u*m+h*y),x=(d*d+u*u+h*h)/(d*v+u*g+h*w),L=b*f-d,M=b*m-u,k=b*y-h,T=x*v-d,P=x*g-u,E=x*w-h,S=(T*L+P*M+E*k)/(Math.sqrt(T*T+P*P+E*E)*Math.sqrt(L*L+M*M+k*k)),S=Math.acos(S),_=P*k-E*M,C=0-(T*k-E*L),O=T*M-P*L,G=0!=d?_/d:0!=u?C/u:O/h,G>0?(j+=S,A++):(z+=S,W++);var F,B;F=j+(2*Math.PI*W-z),B=2*Math.PI*A-j+z,H=j>z?F-(R-2)*Math.PI<1?F:B:B-(R-2)*Math.PI<1?B:F,i=6378137*(H-(R-2)*Math.PI)*6378137,i=i<0?0:i;var N={num:i},U=i,V="";return U>1e10?(U=(U/1e10).toFixed(2),V="万k㎡"):U>1e6?(U=(U/1e6).toFixed(2),V="k㎡"):(U=U.toFixed(2),V="㎡"),N.area=U,N.unit=V,N}var T=o(2),P=function(e){return e&&e.__esModule?e:{default:e}}(T),E=(o(4),o(6));window.GetAbsPoint=function(e){for(var t=e.offsetLeft,o=e.offsetTop;e=e.offsetParent;)t+=e.offsetLeft,o+=e.offsetTop;return{x:t,y:o}},window.stopBubble=function(e){var e=window.event||e;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},window.preventDefault=function(e){var e=window.event||e;return e.preventDefault?e.preventDefault():e.returnValue=!1,!1};var _={"哈尔滨":"45.8032604,126.5352454","乌鲁木齐":"43.8256663,87.6172983","长春":"43.8170838,125.3235296","吉林":"43.8378835,126.5495724","沈阳":"41.8073212,123.4304496","承德":"40.97,117.93","张家口":"40.779837,114.889809","秦皇岛":"39.9357047,119.6018328","北京":"39.9081726,116.3979471","唐山":"39.6304759,118.1804074","廊坊":"39.5210167,116.7066508","天津":"39.1038561,117.2523808","保定":"38.873972,115.4646301","大连":"38.913786,121.61477","沧州":"38.33,116.83","石家庄":"38.0423196,114.5148635","太原":"37.8705544,112.5507374","衡水":"37.72,115.72","武威":"37.94,102.61","德州":"37.4509195,116.3025872","烟台":"37.4638194,121.4479258","晋中":"37.692839,112.759595","滨州":"37.3,118.03","威海":"37.5130682,122.1204195","邢台":"37.05,114.48","邯郸":"36.6122666,114.4929676","济南":"36.6652821,116.9949153","淄博":"36.8134972,118.0550074","潍坊":"36.7068242,119.1619288","青岛":"36.0665687,120.3826699","兰州":"36.0612548,103.8343765","泰安":"36.18,117.13","日照":"35.4163773,119.5268883","济宁":"35.38,116.5","新乡":"35.31,113.85","菏泽":"35.2337502,115.4806561","临沂":"35.11,118.36","铜川":"35.09,109.11","郑州":"34.7472846,113.6248626","洛阳":"34.6228843,112.4565629","连云港":"34.5965504,119.221287","枣庄":"34.86,117.57","开封":"34.79,114.35","天水":"34.6,105.69","西安":"34.2648804,108.9442647","渭南":"34.52,109.5","徐州":"34.2598267,117.1910799","商丘":"34.44,115.65","宝鸡":"34.372529,107.1337853","咸阳":"34.36,108.72","宿迁":"33.9620831,118.2752895","许昌":"34.02,113.81","淮安":"33.6110838,119.0157552","亳州":"33.850643,115.784463","盐城":"33.38,120.13","阜阳":"32.89,115.81","蚌埠":"32.93,117.34","滁州":"32.33,118.31","南京":"32.0583652,118.7964675","镇江":"32.1997885,119.4569276","合肥":"31.823434,117.236884","襄阳":"32.02027,112.11281","南通":"31.9799973,120.8943244","无锡":"31.5661476,120.3030271","常州":"31.7815764,119.9563766","六安":"31.73,116.49","马鞍山":"31.6967876,118.5046571","苏州":"31.2977791,120.5855864","芜湖":"31.3387902,118.3851556","上海":"31.2243531,121.4759159","绵阳":"31.4633766,104.7412737","嘉兴":"30.753924,120.758543","孝感":"30.930712,113.922962","成都":"30.6586016,104.0648565","湖州":"30.89436,120.086818","武汉":"30.593168,114.3053611","南充":"30.843297,106.117231","宜昌":"30.6919668,111.2864709","杭州":"30.2734969,120.1552488","潜江":"30.408358,112.905474","鄂州":"30.396572,114.901607","宁波":"29.868336,121.54399","九江":"29.71,115.97","仁寿":"30.001664,104.140477","绍兴":"29.995762,120.586109","舟山":"29.9854444,122.2065964","重庆":"29.5549144,106.548425","宜宾":"29.77,104.56","岳阳":"29.37,113.09","金华":"29.078696,119.6474768","常德":"29.05,111.69","台州":"28.8285005,121.1758343","衢州":"28.9358827,118.874018","南昌":"28.6836542,115.8583358","泸州":"28.91,105.39","益阳":"28.6,112.33","长沙":"28.2285282,112.9388267","上饶":"28.47,117.97","丽水":"28.4516952,119.9168746","温州":"27.994243,120.6993555","株洲":"27.8278915,113.1338907","抚州":"28,116.34","西昌":"27.900581,102.271484","宜春":"27.81,114.3","邵阳":"27.22,111.5","衡阳":"26.89,112.61","吉安":"27.12,114.97","宁德":"26.65,119.52","南平":"26.65,118.16","福州":"26.0742857,119.2965792","三明":"26.23,117.61","赣州":"25.8292089,114.9335527","莆田":"25.44,119","昆明":"25.0372828,102.722125","泉州":"24.9073983,118.5871139","龙岩":"25.12,117.01","韶关":"24.84,113.62","漳州":"24.52,117.35","厦门":"24.4796151,118.0893905","梅州":"24.55,116.1","清远":"23.7,113.01","河源":"23.73,114.68","潮州":"23.68,116.63","揭阳":"23.55,116.35","广州":"23.129075,113.2644227","汕头":"23.3533618,116.6819429","肇庆":"23.05,112.4","佛山":"23.0217208,113.1213158","东莞":"23.020536,113.7517657","惠州":"23.1110303,114.4170526","江门":"22.5787696,113.08187","深圳":"22.5434465,114.0578183","汕尾":"22.791263,115.381553","中山":"22.5159724,113.3927433","珠海":"22.2709398,113.5772608","阳江":"21.85,111.9","茂名":"21.68,110.88","湛江":"21.2707642,110.3592549","海口":"20.0301288,110.3384399","琼海":"19.25,110.4","三亚":"18.2526851,109.5120298","北海":"21.399225,109.3319245","防城港":"21.9322795,108.051591","钦州":"22.098366,109.0325355","玉林":"22.385644,110.225336","崇左":"22.480256,107.3433105","云浮":"22.8568125,111.794476","南宁":"23.1230145,108.480253","贵港":"23.353828,109.9409055","普洱":"23.431659,100.748887","梧州":"23.512122,111.0015905","来宾":"23.874177,109.4438795","百色":"23.9829095,106.1729955","临沧":"24.058989,99.61307","玉溪":"24.139023,102.220364","贺州":"24.405258,111.321681","河池":"24.58772,107.8709345","柳州":"24.9848575,109.388139","保山":"24.9943755,99.0736655","桂林":"25.3291405,110.560769","曲靖":"25.706302,103.946033","永州":"25.757793,111.709696","郴州":"25.872101,113.2396495","安顺":"25.994224,105.9124195","六盘水":"26.127049,105.020381","攀枝花":"26.718175,101.6983605","贵阳":"26.774349,106.7074855","丽江":"26.960711,100.4533065","毕节":"27.4213735,105.40506","怀化":"27.4492915,109.957282","萍乡":"27.487995,113.9332885","昭通":"27.6045855,104.0995065","铜仁":"27.7089715,109.208322","湘潭":"27.7119305,112.55086","娄底":"27.7258945,111.653423","新余":"27.824999,114.951748","遵义":"28.1827225,106.9172715","鹰潭":"28.243308,117.0878745","山南":"28.344955,92.2186785","乐山":"29.210819,103.5869955","自贡":"29.28641,104.666491","日喀则":"29.2991875,89.0848725","景德镇":"29.330824,117.342145","张家界":"29.3354225,110.520999","内江":"29.6180325,104.86243","咸宁":"29.669675,114.2610045","林芝":"29.812087,94.375559","眉山":"29.882223,103.6806705","雅安":"29.8993365,102.6713945","黄石":"29.9229455,115.0265245","荆州":"30.0511785,112.6718415","拉萨":"30.1527155,91.192707","资阳":"30.1594215,105.099971","池州":"30.209993,117.3954005","广安":"30.44081,106.628297","安庆":"30.5312755,116.522407","宣城":"30.6452405,118.814945","黄冈":"30.6683705,115.274667","遂宁":"30.676664,105.5356075","铜陵":"30.7790845,117.5523835","荆门":"31.006372,112.680569","德阳":"31.117155,104.4914725","达州":"31.3324205,107.6118095","昌都":"31.5257635,97.3347025","随州":"31.885096,113.4364765","巴中":"32.0010225,107.070342","信阳":"32.027331,114.8322645","广元":"32.234919,105.6968235","十堰":"32.3948535,110.515679","淮南":"32.4595715,116.7918675","泰州":"32.5789005,120.108786","阿里地区":"32.773807,82.3680195","安康":"32.779077,109.1194845","扬州":"32.822694,119.4697535","驻马店":"32.909647,114.1638815","汉中":"33.018407,106.8954045","南阳":"33.041445,112.4040635","陇南":"33.569561,105.3090905","漯河":"33.7007065,113.8838765","周口":"33.701071,114.8787505","平顶山":"33.7431525,112.9745455","商洛":"33.769444,109.811645","淮北":"33.769672,116.7287715","宿州":"33.96849,117.178584","三门峡":"34.322967,111.2007965","定西":"35.0898445,104.563415","焦作":"35.1541465,113.112588","运城":"35.209021,111.1638165","平凉":"35.3203785,106.6099445","晋城":"35.639604,112.787374","鹤壁":"35.752296,114.382132","濮阳":"35.769424,115.497748","安阳":"35.7915335,114.316364","固原":"35.883922,106.1473495","海南藏族自治州":"35.913757,100.349844","临汾":"36.166299,111.4795605","庆阳":"36.206228,107.5439345","莱芜":"36.277719,117.658115","海东":"36.304839,102.3755085","聊城":"36.4068705,115.919619","延安":"36.428417,109.1115295","长治":"36.4799895,112.865406","白银":"36.512865,104.54531","西宁":"36.8565065,101.395178","中卫":"36.9432065,105.3817515","吴忠":"37.424554,106.6281735","东营":"37.556177,118.730321","吕梁":"37.7374795,111.3577505","阳泉":"38.099034,113.4895605","银川":"38.1883715,106.353773","榆林":"38.2060025,109.255675","金昌":"38.516947,102.0644795","张掖":"38.779721,99.80694","忻州":"38.903755,112.4614105","石嘴山":"39.0019085,106.4830115","鄂尔多斯":"39.256324,108.990345","乌海":"39.478609,106.8831095","巴音郭楞蒙古自治州":"39.612062,88.174108","朔州":"39.7002655,112.7406605","嘉峪关":"39.82255,98.1829445","大同":"39.9018825,113.5761655","阿拉善盟":"40.0918615,102.1195295","丹东":"40.4287045,124.551891","营口":"40.436094,122.4380095","酒泉":"40.49266,96.3076375","呼和浩特":"40.4971675,111.4215135","葫芦岛":"40.588703,120.165684","鞍山":"40.7906535,122.982959","盘锦":"41.0511475,122.0157195","辽阳":"41.1658755,123.1444455","本溪":"41.1989975,124.69505","巴彦淖尔":"41.3219715,107.563977","朝阳":"41.4246585,120.3407455","锦州":"41.4358085,121.6638165","包头":"41.4997025,110.3723085","乌兰察布":"41.809372,112.5823515","抚顺":"41.8641475,124.58462","通化":"41.947692,126.014042","白山":"42.0976325,127.225621","阜新":"42.274393,122.0031785","吐鲁番":"42.4170095,89.6543005","铁岭":"42.745553,124.2866935","辽源":"42.7720525,125.3466605","赤峰":"43.27844,118.674738","四平":"43.495187,124.5500445","通辽":"43.956404,121.4876785","锡林郭勒盟":"44.181873,115.6643245","昌吉回族自治州":"44.3005815,88.5747085","牡丹江":"44.7133835,129.7765005","松原":"44.77288,124.65836","克拉玛依":"45.155538,84.925089","白城":"45.272318,123.011076","塔城地区":"45.363913,84.806856","鸡西":"45.740995,132.180405","兴安盟":"45.962247,121.585467","七台河":"45.968151,131.024473","大庆":"46.4355505,124.7775985","双鸭山":"46.6883845,132.5119275","绥化":"46.8062435,126.7236085","阿勒泰地区":"47.098143,88.310699","佳木斯":"47.211552,132.307463","齐齐哈尔":"47.586032,124.542083","鹤岗":"47.712992,131.1039355","伊春":"47.9694565,129.209813","黑河":"49.301429,127.1473635","呼伦贝尔":"50.2218255,120.8089255","阿坝藏族羌族自治州":"32.4591335,102.4875815","阿克苏地区":"41.074823,81.064492","博尔塔拉蒙古自治州":"44.7003225,81.8796735","楚雄彝族自治州":"25.3651885,101.6083375","大理白族自治州":"25.6844715,99.96083","大兴安岭地区":"52.172519,124.1110715","德宏傣族景颇族自治州":"24.595204,98.1336815","迪庆藏族自治州":"28.0636255,99.456803","恩施土家族苗族自治州":"30.2615825,109.5101525","甘南藏族自治州":"34.3545995,102.7684445","甘孜藏族自治州":"31.088756,99.9214","果洛藏族自治州":"34.0757445,99.3547365","海北藏族自治州":"37.918483,100.3730145","海西蒙古族藏族自治州":"35.9717385,94.6743155","和田地区":"37.0065415,81.1684015","红河哈尼族彝族自治州":"23.610476,103.046588","黄南藏族自治州":"35.1232485,101.5762425","喀什地区":"37.8583805,77.1678035","克孜勒苏柯尔克孜自治州":"39.5305285,76.18872","凉山彝族自治州":"27.6803125,101.975647","临夏回族自治州":"35.5874445,103.2775515","那曲地区":"33.2165605,90.0433895","怒江傈僳族自治州":"26.9778105,98.8936295","黔东南苗族侗族自治州":"26.4230625,108.4527945","黔南布依族苗族自治州":"26.2771165,107.2627775","黔西南布依族苗族自治州":"25.4023455,105.5359005","文山壮族苗族自治州":"23.5775165,104.892872","西双版纳傣族自治州":"21.871685,100.8964385","湘西土家族苗族自治州":"28.6827385,109.7941215","延边朝鲜族自治州":"43.259291,129.3997855","伊犁哈萨克自治州":"43.545887,82.7079085","玉树藏族自治州":"33.914364,93.598195","张家港":"31.877909,120.6178445"},C={4:19567.879241,5:9783.9396205,6:4891.96981025,7:2445.984905125,8:1222.9924525625,9:611.49622628125,10:305.748113140625,11:152.8740565703125,12:76.43702828515625,13:38.21851414257813,14:19.10925707128906,15:9.55462853564453,16:4.777314267822266,17:2.388657133911133,18:.597164283477783,19:.298582141738892},O={host:"http://tools.citymap.fang.com",uri:{private:"/s/dataviz/",tmp:"/s/dataviz/v2/"},ak:"ZGE5NDg2OTkzMThhNDE3Mzg0N2I4YjdmNDI2YTAwYTY",tileHost:"http://s{s}.3fang.com",cluster:["1","2","3","4","5"]},S={warm:"warm",cool:"cool",midnight:"midnight",pencil:"pencil",dark:"dark",contrast:"contrast",pink:"pink",vision:"vision",adventure:"adventure",blue:"blue",light:"light",fresh:"fresh",natural:"natural",admin:"admin",tourism:"tourism",river:"river",chinese:"chinese",history:"history"},j={OpenStreetMap:1,AMap:4,AMap_satel:5,GoogleCnMap:6,GoogleCnMap_satel:7,GoogleTerrian:8,GeoHey:9},z={},I={Baidu:{wgs84:function(e){return G.Proj.Baidu.unproject(e[0],e[1])},gcj02:function(e){return I.Wgs84.gcj02(I.Baidu.wgs84(e))},mercator:function(e){return I.Gcj02.mercator(I.Baidu.gcj02(e))}},Wgs84:{mercator:function(e){return I.Gcj02.mercator(I.Wgs84.gcj02(e))},baidu:function(e){return G.Proj.Baidu.project(e[0],e[1])},gcj02:function(e){return G.Proj.Gcj.project(e[0],e[1])}},Mercator:{wgs84:function(e){return I.Gcj02.wgs84(I.Mercator.gcj02(e))},baidu:function(e){return I.Wgs84.baidu(I.Mercator.wgs84(e))},gcj02:function(e){return G.Proj.WebMercator.unproject(e[0],e[1])}},Gcj02:{mercator:function(e){return G.Proj.WebMercator.project(e[0],e[1])},wgs84:function(e){return G.Proj.Gcj.unproject(e[0],e[1])},baidu:function(e){return I.Wgs84.baidu(I.Gcj02.wgs84(e))}}},W={};W[j.BaiduMap_satel]=[["BaiduMap","satel"],["BaiduMap","sate"]],W[j.OpenStreetMap]=[["OpenStreetMap",""]],W[j.BaiduMap]=[["BaiduMap","street"]],W[j.AMap]=[["AMap","street"]],W[j.AMap_satel]=[["AMap","satel"],["AMap","sate"]],W[j.GoogleCnMap]=[["GoogleCnMap","street"]],W[j.GoogleCnMap_satel]=[["GoogleCnMap","satel"],["GoogleCnMap","sate"]],W[j.GoogleTerrian]=[["GoogleCnMap","terrian"]],a.prototype.initialize=function(){var e=this,t={maxRes:e.param.maxRes,minRes:e.param.minRes,continuouslyZoom:!1,dragPan:!0,hideLogo:!0,zoomAnim:!0,doubleZoom:e.param.doubleZoom,scrollZoom:e.param.scrollZoom,wrap:e.param.wrap,loadingOpts:e.param.loadingOpts,recordStatus:e.param.recordStatus,initStatus:{res:C[e.param.zoom]||7192,rotate:e.param.rotate,pitch:e.param.pitch}};e.param.point&&e.param.point[0]&&e.param.point[1]?t.initStatus.center=e.param.point:t.initStatus.center=e.getCityCenter(e.param.city);var o=e.gmap=new G.Map(e.param.map,t);e.gmap=o,e.mapContainer=document.getElementById(e.param.map),e.setMapType(e.param.mapType),e.setCenterAndZoom(e.param.city,e.param.zoom),e._createLayer(),e._dataVizClick(),$.each(["moveEnd","resize","zoomEnd"],function(t,o){e.addEventListener(o)})},a.prototype.setMapType=function(e,t){for(var o=this,a=0;a<(o.mapTypeLayers||[]).length;a++)o.mapTypeLayers[a].remove();if(o.mapTypeLayers=[],e==j.GeoHey){var i=O.host+"/s/mapping/"+t+"/all?z={z}&x={x}&y={y}&retina={i}&ak="+O.ak,r=new G.Layer.Tile(i,{tileEnlarge:!1});o.gmap.addLayer(r),o.mapTypeLayers.push(r),r.bringToBottom()}else W[e]&&$.each(W[e],function(e,t){var a=G.Layer[t[0]];if(a){var i=new a(t[1]||"");o.gmap.addLayer(i),o.mapTypeLayers.push(i),i.bringToBottom()}});o._adjustByLayer(o.mapTypeLayers[o.mapTypeLayers.length-1])},a.prototype.clearLayers=function(){var e=this,t=e.gmap.getLayers();for(var o in t)t[o].remove()},a.prototype.getCityCenter=function(e){if("string"==typeof e){var t=e;e=null,t=t.replace("市","");var o=(_[t]||"").split(",");if(2==o.length)return e=[o[1],o[0]],I.Baidu.mercator(e)}else if($.isArray(e))return I.Baidu.mercator(e)},a.prototype.setCenterAndZoom=function(e,t){var o=this,a="string"==typeof e?o.getCityCenter(e):e;a&&(o.gmap.zoomRes(a,C[t]),"undefined"!=typeof G_ON_WEBGL&&G_ON_WEBGL&&o.gmap.pitchTo(o.param.pitch))},a.prototype.setCenterAndRes=function(e,t){var o=this;o.gmap.zoomRes(e,t),"undefined"!=typeof G_ON_WEBGL&&G_ON_WEBGL&&o.gmap.pitchTo(o.param.pitch)},a.prototype.setCenter=function(e){var t=this,o=t.getCityCenter(e);o&&(t.gmap.centerAt(o),"undefined"!=typeof G_ON_WEBGL&&G_ON_WEBGL&&t.gmap.pitchTo(t.param.pitch))},a.prototype.view=function(e){var t=this,o=t.getCityCenter(e);o&&(t.gmap.view(o),"undefined"!=typeof G_ON_WEBGL&&G_ON_WEBGL&&t.gmap.pitchTo(t.param.pitch))},a.prototype.getCenter=function(){return this.gmap.getCenter()},a.prototype.setPitch=function(e){var t=this;t.param.pitch=e||0,t.gmap.pitchTo(t.param.pitch)},a.prototype.setZoom=function(e){var t=this,o=t.gmap.getCenter();o&&t.gmap.zoomRes(o,C[e])},a.prototype.getRes=function(){return this.gmap.getResolution()},a.prototype.setRes=function(e){var t=this,o=t.gmap.getCenter();o&&t.gmap.zoomRes(o,e)},a.prototype._adjustByLayer=function(e){var t=this,o=t.gmap.getResolution(),a=t.gmap.getSize(),i=t.gmap.getCenter();t.gmap.view(i,a[0]*o,a[1]*o,t.gmap.getRotate()),"undefined"!=typeof G_ON_WEBGL&&G_ON_WEBGL&&t.gmap.pitchTo(t.param.pitch)},a.prototype.afreshBindLayer=function(e){var t=this;e&&t.layers&&t.layers[e]&&(t.layers[e].removeListener("graphicClicked",t.graphicClickedEvent),t.layers[e].addListener("graphicClicked",t.graphicClickedEvent))},a.prototype._createLayer=function(){var e=this;e.graphicClickedEvent=function(t){var o=t.graphic;if(o&&!e.disabledEvent){var a=o._overlayType,i=o._overlayKey,r=e.overlays[a][i];r&&r.eventListener&&r.eventListener.click&&"function"==typeof r.eventListener.click&&(e._layerClick=!0,r.eventListener.click(r))}},e.layers={};var t=["polygon","circlePolygon","circle","PolyLine","text","image","highLightLayer","arrow","od","mapTip","draw"];$.each(t,function(t,o){e.layers[o]=new G.Layer.Graphic,e.layers[o].addTo(e.gmap),"mapTip"!=o&&"highLightLayer"!=o&&(e.layers[o].addListener("graphicClicked",e.graphicClickedEvent),e.layers[o].addListener("graphicOver",function(t){var o=t.graphic;if(o&&!e.disabledEvent){var a=o._overlayType,i=o._overlayKey,r=e.overlays[a][i];r&&r.eventListener&&r.eventListener.mouseover&&"function"==typeof r.eventListener.mouseover&&r.eventListener.mouseover(r)}}),e.layers[o].addListener("graphicOut",function(t){var o=t.graphic;if(o&&!e.disabledEvent){var a=o._overlayType,i=o._overlayKey,r=e.overlays[a][i];r&&r.eventListener&&r.eventListener.mouseout&&"function"==typeof r.eventListener.mouseout&&r.eventListener.mouseout(r)}}))})},a.prototype._layerSort=function(){var e=this;$.each(e.dataVizLayers,function(e,t){t.layer&&t.layer.bringToTop()}),$.each(Object.keys(e.layers),function(t,o){e.layers[o].bringToTop()})},a.prototype.getDataViz=function(e){var t=this;t.dataVizLayers=t.dataVizLayers||[];var o={},a=[],i=[];$.each(e,function(e,r){var n=t.dataVizLayers.length+e,l=$.map(t.dataVizLayers,function(e){return e.dataUid==r.dataUid?e:{}});l.length>0&&(n=l.zIndex);var s=$.extend(!0,{zIndex:n,show:!0},r);s.clickHighLight&&(s.clickHighLight=$.extend(!0,{show:!1,style:{outlineColor:"#f1f1f1",outlineWidth:3,fillColor:"#2c2a00",fillOpacity:.8,fillImage:"/images/line-fill.png",fillImageSize:[24,24]},getPolygonStyle:null},s.clickHighLight)),o[s.dataUid]=s,o[s.dataUid]=$.extend(!0,{},s),delete s.eventListener,delete s.clickHighLight,s.show?i.push(s):a.push(s)}),a=a.concat(G.DataViz.get(i,O)),$.each(a,function(e,a){var i=a.layer;t.gmap.addLayer(i);var r=o[a.dataUid];if($.extend(!0,a,{show:r.show,zIndex:r.zIndex,clickHighLight:r.clickHighLight,eventListener:r.eventListener}),a.animated){var n=new G.Control.Timeline;t.gmap.addControl(n),n.setLayer(i)}if(a.utfGridLayer){var l=a.eventListener;l&&"function"==typeof l.mousemove&&(a.utfGridLayer.options.showAttr=!1,t.gmap.addLayer(a.utfGridLayer),a.utfGridLayer.addListener("gridMouseMove",l.mousemove))}var s=-1;$.each(t.dataVizLayers,function(e,t){if(t.dataUid==a.dataUid)return s=e,void(t.layer&&t.layer.remove())}),s>-1?t.dataVizLayers.splice(s,1,a):t.dataVizLayers.push(a)}),t.dataVizLayers.sort(function(e,t){return e.zIndex>t.zIndex}),t._layerSort()},a.prototype._dataVizClick=function(){var e=this;e.gmap.bind("click",function(t){e.dataVizLayers&&0!=e.dataVizLayers.length&&!e.disabledEvent&&setTimeout(function(){function o(){for(var o=e.dataVizLayers.length-1;o>=0;o--){var i=e.dataVizLayers[o],n=i.dataUid;if(a[n]&&a[n].length>0){var l=i.eventListener,s=a[n][0].attrs,p=a[n][0].geom.m||a[n][0].geom;l&&"function"==typeof l.click&&l.click(t,s,p);var c=i.clickHighLight;if(c&&c.show){var d=c.style;"function"==typeof c.getPolygonStyle&&(d=$.extend(!0,d,c.getPolygonStyle(s)));var u=new r($.extend(!0,{type:"highLightLayer",geom:p,outlineColor:c.style.outlineColor,outlineWidth:c.style.outlineWidth,fillColor:c.style.fillColor,fillOpacity:c.style.fillOpacity,fillImage:c.style.fillImage,fillImageSize:c.style.fillImageSize},d));e.addOverlay("highLightLayer","dataVizHighLight",u),e.layers.highLightLayer.bringToTop()}break}}}if(e._layerClick)return void delete e._layerClick;e.removeOverlay("highLightLayer","dataVizHighLight"),e.gmap.hidePopup();for(var a={},i=0,n=0,l=e.dataVizLayers.length-1;l>=0;l--){var s=e.dataVizLayers[l],p=s.dataUid,c=s.eventListener;if(s.show&&c&&"function"==typeof c.click&&s.visible){n++,1==n&&F.top();var d=s.config.type.indexOf("marker")>-1?s.config.markerSize||8:1,u=(e.gmap.toMap([t.screenX,t.screenY]),e.gmap.toMap([t.screenX-d,t.screenY+d])),h=e.gmap.toMap([t.screenX+d,t.screenY-d]),f=[u[0],u[1],h[0],h[1]],m=!0;void 0!==s.returnGeometry&&(m=s.returnGeometry);var y=O.host+("private"==s.dataType?"/s/data/":"/s/tmp_data/")+p+"/query?ak="+O.ak;!function(e,t,r){$.ajax({url:t,type:"post",dataType:"json",data:{geometry:JSON.stringify(f),returnGeometry:r},success:function(t){i++,0==t.code&&(t.data.features.length>0&&(a[e]=t.data.features),i==n&&(F.close(),o()))},error:function(){i++}})}(p,y,m)}}},50)})},a.prototype.removeDataViz=function(e){var t=this;t.dataVizLayers&&t.dataVizLayers.length>0&&(e?t.dataVizLayers=$.map(t.dataVizLayers,function(t,o){if(t.dataUid!=e)return t;t.layer&&t.layer.remove()}):($.each(t.dataVizLayers,function(e,t){t.layer&&t.layer.remove()}),delete t.dataVizLayers))},a.prototype.hideDataViz=function(e){var t=this;$.each(t.dataVizLayers,function(t,o){e?o.dataUid==e&&o.show&&o.layer&&(o.layer.hide(),o.show=!o.show):(o.layer.hide(),o.show=!1)})},a.prototype.showDataViz=function(e){var t=this;$.each(t.dataVizLayers,function(o,a){e?a.dataUid!=e||a.show||(a.show=!a.show,a.layer?a.layer.show():t.getDataViz([a])):(a.layer.hide(),a.show=!0)})},a.prototype.addOverlay=function(e,t,o){var a=this;a.overlays=a.overlays||{},a.overlays[e]=a.overlays[e]||{},a.overlays[e][t]=o,o.layer._overlayType=e,o.layer._overlayKey=t,o.layer.addTo(a.layers[o.type])},a.prototype.addHtmlOverlay=function(e){var t=this;t.overlays.html=t.overlays.html||{},t.layers.html||(t.layers.html=new G.Layer.Html,t.layers.html.addTo(t.gmap));var o=t.layers.html.addHtml(e.sHtml,e.point[0],e.point[1]);t.overlays.html[e.id]=o},a.prototype.hideTile=function(e){((this.layers||{})[e]||{}).hide()},a.prototype.showTile=function(e){((this.layers||{})[e]||{}).show()},a.prototype.removeOverlay=function(e,t){var o=(this.overlays||{})[e]||{};if("html"==e){var a=(this.layers||{})[e]||{};$.each(Object.keys(o),function(e,t){a.removeHtml(o[t]),delete o[t]})}else if(t){var i=o[t];i&&(i.layer.remove(),delete o[t])}else $.each(Object.keys(o),function(e,t){o[t].layer.remove(),delete o[t]})},a.prototype.clearOverlays=function(){var e=this,t=e.overlays||{},o=e.tips||{};for(var a in o)e.removeMapTip(o[a]);e.tips={};for(var i in t){var r=t[i].layer;r&&r.clear()}delete e.overlays},a.prototype.overlayShow=function(e,t){var o=this;if(o.overlays=o.overlays||{},o.overlays[e]=o.overlays[e]||{},t){var a=o.overlays[e][t];a._hide&&(a.layer.addTo(this.layers[a.type]),a._hide=!1)}else for(var i in o.overlays[e]){var a=o.overlays[e][i];a._hide&&(a.layer.addTo(this.layers[a.type]),a._hide=!1)}},a.prototype.overlayHide=function(e,t){var o=this;if(o.overlays=o.overlays||{},o.overlays[e]=o.overlays[e]||{},t){var a=o.overlays[e][t];if(!a._hide){var i=a.layer.clone();i._overlayType=a.layer._overlayType,i._overlayKey=a.layer._overlayKey,a.layer.remove(),a.layer=i,a._hide=!0}}else for(var r in o.overlays[e]){var a=o.overlays[e][r];if(!a._hide){var i=a.layer.clone();i._overlayType=a.layer._overlayType,i._overlayKey=a.layer._overlayKey,a.layer.remove(),a.layer=i,a._hide=!0}}},a.prototype.tipPositionRefresh=function(){var e=this,t=e.tips||{};for(var o in t){var a=t[o];a.mapLine?a.drawMapLine():a.setPosition()}},a.prototype.addEventListener=function(e,t){var o=this,a="moveEnd"==e||"resize"==e||"zoomEnd"==e?function(e){o.tipPositionRefresh(),"function"==typeof t&&t(e,o)}:function(e){t(e,o)};o.events=o.events||{},o.events[e]=a,o.gmap.bind(e,a)},a.prototype.removeEventListener=function(e){this.events=this.events||{},this.gmap.unbind(e,this.events[e])},a.prototype.addMapTip=function(e){var t=e.opts.id,o=this,a=this.tips||{},i=o.mapContainer;a[t]||($(i).after(e.$node),a[t]=e,e.draggable(this.gmap)),e.setPosition()},a.prototype.removeMapTip=function(e){if(e){var t=e.opts.id,o=this.tips||{};o[t]&&delete o[t],e.destroy()}},a.prototype.loading=function(){this.unLoading();var e=this.param.loadingOpts||z,t=$(this.mapContainer);t.css("position","relative");var o="";for(var a in e.css||{})o+=a+":"+e.css[a]+";";t.append('<div class="mOverlay" style="z-index: 1000; border: medium none; margin: 0px; padding: 0px; width: 100%; height: 100%; top: 0px; left: 0px; position: absolute;'+o+'">                    <div class="common-loading" style="position: absolute;top:50%;margin-top:-30px;left:50%;margin-left:-100px;"><div class="load-container"><span class="pillar" style="animation-delay:.1s;"></span><span class="pillar" style="animation-delay:.2s;"></span><span class="pillar" style="animation-delay:.3s;"></span><span class="pillar" style="animation-delay:.4s;"></span><span class="pillar" style="animation-delay:.5s;"></span><span class="pillar" style="animation-delay:.6s;"></span><p>'+(e.text||"loading")+"</p></div></div>                </div>")},a.prototype.unLoading=function(){$(this.mapContainer).find(".mOverlay").remove()},a.prototype.downloadImg=function(e){var t=this;if("function"!=typeof html2canvas)throw"not htmlcanvas.js ";e=$.extend({},{callback:null,chart:null,imageType:"png",filename:"export",containment:""},e),e.container=$(t.mapContainer),"parent"==e.containment&&(e.container=e.container.parent());var o=$(".pages-container");0==o.length&&(o=e.container),o.overlay();var a;if(e.chart){var i=e.chart.getDom().id,r='<img src="'+e.chart.getDataURL()+'"  style="width:100%;height:100%;position: absolute;top: 0;left: 0;z-index: 9;" class="help-tempimage"/>';$("#"+i).append(r),a=$("#"+i+" .help-tempimage")}var n=t.gmap.getSize(),l=$('<img src="'+t.gmap.print(n[0],n[1])+'"  style="width:'+n[0]+"px;height:"+n[1]+'px;position: absolute;left: 0;top: 0;z-index:1"/>');l.load(function(){$("#"+t.param.map+" .g-layers-frame").append(l),html2canvas(e.container,{useCORS:!0,onrendered:function(t){var i=t.toDataURL(e.imageType),r=document.createElementNS("http://www.w3.org/1999/xhtml","a");r.href=i,r.download=e.filename+"."+e.imageType;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n),a&&a.remove(),"function"==typeof e.callback&&e.callback(),o.unOverlay(),l.remove()}})})},a.prototype._drawStop=function(){},a.prototype.openDraw=function(e){var t=this;t.tool=$.extend(!0,{type:"polygon",points:[],isUse:!1,style:{lineColor:"#f00",tipFontColor:"#000",lineFontColor:"#f00"},isFirstMove:!0,followTip:null,nowOverlay:null,overlayerSet:[],lengthSet:[],getPolygonArea:function(e){if(e=$.map(e,function(e){var t=I.Mercator.baidu(e);return{lng:t[0],lat:t[1]}}),e.length<3)return 0;for(var t=0,o=0,a=0,i=0,r=0,n=0,l=0,s=0,p=0,c=0,d=0,u=0,h=0,f=0,m=0,y=0,v=0,g=0,w=0,b=0,x=0,L=0,M=0,k=0,T=0,P=0,E=0,_=0,C=0,O=0,G=0,S=0,j=0,z=0,W=e.length,A=0;A<W;A++)0==A?(o=e[W-1].lng*Math.PI/180,a=e[W-1].lat*Math.PI/180,i=e[0].lng*Math.PI/180,r=e[0].lat*Math.PI/180,n=e[1].lng*Math.PI/180,l=e[1].lat*Math.PI/180):A==W-1?(o=e[W-2].lng*Math.PI/180,a=e[W-2].lat*Math.PI/180,i=e[W-1].lng*Math.PI/180,r=e[W-1].lat*Math.PI/180,n=e[0].lng*Math.PI/180,l=e[0].lat*Math.PI/180):(o=e[A-1].lng*Math.PI/180,a=e[A-1].lat*Math.PI/180,i=e[A].lng*Math.PI/180,r=e[A].lat*Math.PI/180,n=e[A+1].lng*Math.PI/180,l=e[A+1].lat*Math.PI/180),s=Math.cos(r)*Math.cos(i),p=Math.cos(r)*Math.sin(i),c=Math.sin(r),d=Math.cos(a)*Math.cos(o),u=Math.cos(a)*Math.sin(o),h=Math.sin(a),f=Math.cos(l)*Math.cos(n),m=Math.cos(l)*Math.sin(n),y=Math.sin(l),v=(s*s+p*p+c*c)/(s*d+p*u+c*h),g=(s*s+p*p+c*c)/(s*f+p*m+c*y),w=v*d-s,b=v*u-p,x=v*h-c,L=g*f-s,M=g*m-p,k=g*y-c,C=(L*w+M*b+k*x)/(Math.sqrt(L*L+M*M+k*k)*Math.sqrt(w*w+b*b+x*x)),C=Math.acos(C),T=M*x-k*b,P=0-(L*x-k*w),E=L*b-M*w,_=0!=s?T/s:0!=p?P/p:E/c,_>0?(O+=C,j++):(G+=C,S++);var H,R;return H=O+(2*Math.PI*S-G),R=2*Math.PI*j-O+G,z=O>G?H-(W-2)*Math.PI<1?H:R:R-(W-2)*Math.PI<1?R:H,t=6378137*(z-(W-2)*Math.PI)*6378137,t=t<0?0:t},GetAreaUnit:function(e){var t=e.area,o=e.unit;t>1e10?(t=(t/1e10).toFixed(2),o="万k㎡"):t>1e6?(t=(t/1e6).toFixed(2),o="k㎡"):(t=t.toFixed(2),o="㎡"),e.area=t,e.unit=o},newPoint:function(e){t.tool;new G.Graphic.Point(e,{name:"beijing"},{shape:"circle",size:[8,8],offset:[0,0],outline:!0,fill:!1,outlineColor:"#f00",clickable:!0}).addTo(t.layers.draw)},newLine:function(){var e=t.tool;e.nowOverlay=new G.Graphic.Polyline(e.points,null,{lineWidth:2,lineCap:"round",lineJoin:"round",lineColor:e.style.lineColor}),e.nowOverlay.addTo(t.layers.draw)},newLineLength:function(e,o){var a=t.tool;if("polyline"==a.type&&e.length>1){var i=e.length,r=I.Mercator.gcj02(e[i-1]),n=I.Mercator.gcj02(e[i-2]),l=G.GeodeticUtil.sphereDistance(r,n),s=[(e[i-1][0]+e[i-2][0])/2,(e[i-1][1]+e[i-2][1])/2],p=new G.Graphic.Point(s,{name:""},{shape:"text",size:[12,12],offset:[-10,-30],fillColor:a.style.lineFontColor,text:"距离"+(l/1e3).toFixed(2)+"km"});return p.addTo(o),a.lengthSet.push(l),p}},newFollowTip:function(e,o){var a=t.tool;a.followTip=new G.Graphic.Point(e,null,{shape:"text",size:[12,12],offset:[-20,-20],fillColor:a.tipFontColor,text:o,clickable:!0}),a.followTip.addTo(t.layers.draw)},click:function(e){var o=t.tool,a=[e.mapX,e.mapY];return o.isFirstMove?(o.points.push(a),o.x=e.screenX,o.y=e.screenY):o.points.splice(o.points.length-1,1,a),"polygon"==o.type&&o.points.length,"polyline"==o.type&&(o.newPoint(a),o.points.length>1&&o.newLineLength(o.points,t.layers.draw)),o.isUse=!0,o.isFirstMove=!0,stopBubble(e),preventDefault(e)},dbclick:function(e){var o=t.tool,a=[e.mapX,e.mapY];o.isUse&&(o.points.splice(o.points.length-1,1,a),"polyline"==o.type&&(o.newPoint(a),o.nowOverlay.updateGeom(o.points),o.newLineLength(o.points,t.layers.draw)),t.gmap.unbind("click",t.tool.click),t.gmap.unbind("mousemove",t.tool.mousemove),t.gmap.unbind("doubleclick",t.tool.dbclick),$("#tool_followTip .del").show(),"polygon"==o.type&&2==o.points.length?$("#tool_followTip .tip").text("两点一线无法确定面积"):$("#tool_followTip .tip").hide(),$("#tool_followTip .del").unbind("click").click(function(){t.layers.draw.clear(),$("#tool_followTip").remove(),t.tool.html=null}),t.gmap.options.doubleZoom=!0,o.enableMapEvent(),o.isUse=!1)},del:function(e){var o=t.tool;t.layers.draw.clear(),$("#tool_followTip").remove(),o.html=null,t.gmap.options.doubleZoom=!0},gethtml:function(e,o){t.tool;return"polyline"==e?'<div id="tool_followTip" style="min-width:170px;padding:3px 10px 3px 3px;margin-right:5px;background:#fff;border:1px solid #f00;font-size:12px;color:#999;position:relative;border-radius:3px;">                            <span>总长：<span style="color:#f00;font-size:14px;margin-right:3px;">'+o+'</span>km<br>                            <span class="tip">单击确定地点，双击结束</span><a href="javascript:;" class="del" style="color:#f00;position:absolute;right:3px;top:1px;display:none;font-size:14px;">x</a></div>':"polygon"==e?'<div id="tool_followTip" style="min-width:170px;padding:3px 10px 3px 3px;margin-right:5px;background:#fff;border:1px solid #f00;font-size:12px;color:#999;position:relative;border-radius:3px;">                            <span>总面积：<span style="color:#f00;font-size:14px;margin-right:3px;">'+o.area+"</span>"+o.unit+'<br>                            <span class="tip">单击确定地点，双击结束</span><a href="javascript:;" class="del" style="color:#f00;position:absolute;right:3px;top:1px;display:none;font-size:14px;">x</a></div>':'<div id="tool_followTip" style="width:150px;padding:3px;margin-right:5px;background:#fff;border:1px solid #f00;font-size:12px;color:#999;position:relative;">                            <span class="tip">单击确定地点，双击结束</span><a href="javascript:;" class="del" style="color:#f00;position:absolute;right:3px;top:1px;display:none;font-size:14px;">x</a></div>'},mousemove:function(e){var o=t.tool,a=[e.mapX,e.mapY];if(o.isUse){if(o.followTip.options.text="",o.isFirstMove?o.points.push(a):o.points.splice(o.points.length-1,1,a),"polygon"==o.type)if(o.nowOverlay?o.nowOverlay.updateGeom([o.points]):(o.nowOverlay=new G.Graphic.Polygon([o.points]),o.nowOverlay.addTo(t.layers.draw)),o.points.length>=3)if(o.html){var i={};i.area=o.getPolygonArea(o.points),o.GetAreaUnit(i),o.polygonArea=i.area,o.html.remove(),o.html=(new G.Layer.Html).addTo(t.gmap),o.id=o.html.addHtml(o.gethtml("polygon",i),a[0],a[1])}else o.html=(new G.Layer.Html).addTo(t.gmap),o.id=o.html.addHtml(o.gethtml(),a[0],a[1]);else o.html?(o.html.remove(),o.html=(new G.Layer.Html).addTo(t.gmap),o.id=o.html.addHtml(o.gethtml(),a[0],a[1])):(o.html=(new G.Layer.Html).addTo(t.gmap),o.html.addHtml(o.gethtml(),a[0],a[1]));if("polyline"==o.type)if(o.nowOverlay?o.nowOverlay.updateGeom(o.points):o.newLine(),o.html){for(var r=0,n=0;n<o.lengthSet.length;n++)r+=o.lengthSet[n];var l=o.points.length,s=I.Mercator.gcj02(o.points[l-1]),p=I.Mercator.gcj02(o.points[l-2]),c=G.GeodeticUtil.sphereDistance(s,p);r+=c,o.html.remove(),o.html=(new G.Layer.Html).addTo(t.gmap),o.id=o.html.addHtml(o.gethtml("polyline",(r/1e3).toFixed(1)),a[0],a[1])}else o.html=(new G.Layer.Html).addTo(t.gmap),o.id=o.html.addHtml("<span>单击继续，双击结束</span>",a[0],a[1]);o.isFirstMove=!1}else o.followTip?o.followTip.updateGeom(a):o.newFollowTip(a,"polygon"==o.type?"单击开始测量面积":"单击开始测量长度")},disableMapEvent:function(){t.tool;t.gmap.options.doubleZoom=!1,t.layers.draw.unbind("graphicClicked"),t.layers.draw.unbind("graphicOver"),t.layers.draw.unbind("graphicOut"),t.disabledEvent=!0},enableMapEvent:function(){t.disabledEvent=!1;t.tool}},e),t.tool.disableMapEvent(),t.gmap.bind("click",t.tool.click),t.gmap.bind("mousemove",t.tool.mousemove),t.gmap.bind("doubleclick",t.tool.dbclick)},a.prototype.closeDraw=function(){var e=this;e.tool&&(e.tool.isUse=!1,delete e.tool,e.layers.draw.clear(),$("#tool_followTip").remove())},i.prototype.initialize=function(){var e=this;e.type=e.param.shape;var t,o=e.param.point;switch(e.param.shape){case"image":t=new G.Graphic.Point(o,null,{shape:e.param.shape,size:e.param.size,offset:e.param.offset,image:e.param.image,clickable:e.param.clickable});break;case"text":t=new G.Graphic.Point(o,null,{shape:e.param.shape,size:e.param.size,offset:e.param.offset,text:e.param.text,fillColor:e.param.fillColor,fillOpacity:e.param.fillOpacity,textFont:e.param.textFont,textStyle:e.param.textStyle,textAlign:e.param.textAlign,clickable:e.param.clickable});break;case"circle":t=new G.Graphic.Point(o,null,{shape:e.param.shape,size:e.param.size,offset:e.param.offset,fillColor:e.param.fillColor,fillOpacity:e.param.fillOpacity,outlineWidth:e.param.outlineWidth,lineHighlightWiden:e.param.lineHighlightWiden,gradual:e.param.gradual,clickable:e.param.clickable});break;default:t=new G.Graphic.Point(o,null,{shape:e.param.shape,size:e.param.size,offset:e.param.offset,image:e.param.image,clickable:e.param.clickable})}e.layer=t},i.prototype.addEvent=function(e){this.eventListener=$.extend(!0,{click:null,mouseover:null,mouseout:null},e)},r.prototype.initialize=function(){var e=this;e.type=e.opts.type,e.point=e.opts.point,e.geom=e.opts.geom||e.opts.point,e.geom=Array.isArray(e.geom[0][0][0])?e.geom:[e.geom];var t=new G.Graphic.MultiPolygon({m:e.geom},null,{fillColor:e.opts.fillColor,fillOpacity:e.opts.fillOpacity,outlineWidth:e.opts.outerWidth,outlineColor:e.opts.outlineColor,clickable:e.opts.clickable,fillImage:e.opts.fillImage||"",fillImageSize:e.opts.fillImageSize||""});e.layer=t},r.prototype.addEvent=function(e){this.eventListener=$.extend(!0,{click:null,mouseover:null,mouseout:null},e)},n.prototype.initialize=function(){var e=this;e.type=e.opts.type,e.point=e.opts.point,e.geom=e.opts.geom||e.opts.point,e.geom=Array.isArray(e.geom[0][0][0])?e.geom:[e.geom];var t=new G.Graphic.MultiPolyline({m:e.geom},null,{lineWidth:e.opts.lineWidth,lineColor:e.opts.lineColor,lineOpacity:e.opts.lineOpacity});e.layer=t},n.prototype.addEvent=function(e){this.eventListener=$.extend(!0,{click:null,mouseover:null,mouseout:null},e)},s.prototype.initialize=function(){var e=this,t=l(e.opts.point,e.opts.extent);e.type=e.opts.type,e.showText=e.opts.showText;var o=new G.Graphic.Circle([e.opts.point[0],e.opts.point[1],t],null,{outline:e.opts.outline,outlineColor:e.opts.outlineColor,outlineOpacity:e.opts.outlineOpacity,outlineWidth:e.opts.outlineWidth,outlineDashArray:e.opts.outlineDashArray,fillColor:e.opts.fillColor,fillOpacity:e.opts.fillOpacity,gradual:e.opts.gradual});if(e.layer=o,e.showText){var a=e.opts.baseMap.gmap.toScreen([e.opts.point[0],e.opts.point[1]-t]);a=.6*a[1];var i=new G.Graphic.Point([e.opts.point[0],e.opts.point[1]-.8*t],null,{shape:"text",text:e.opts.extent/1e3+"Km",size:[16,40],fillColor:e.opts.labelColor});i.addTo(e.opts.baseMap.layers.text),e.labelLayer=i}},s.prototype.destory=function(){var e=this;e.layer&&(e.layer.remove(),delete e.layer),e.labelLayer&&(e.labelLayer.remove(),delete e.labelLayer)},p.prototype.initialize=function(){var e=this;e.type=e.opts.type;var t=new G.Graphic.AnimOD([e.opts.centerPoint,e.opts.targetPoint],null,{clickable:e.opts.clickable,curvature:e.opts.curvature,curvePosition:e.opts.curvePosition,lineWidth:e.opts.lineWidth,direction:e.opts.direction,duration:e.opts.duration,repeatCount:e.opts.repeatCount,shadow:e.opts.shadow,shadowColor:e.opts.shadowColor,lineColor:e.opts.lineColor,lineOpacity:e.opts.lineOpacity,symbol:e.opts.symbol,symbolSize:e.opts.symbolSize,symbolOnly:e.opts.symbolOnly});e.layer=t;var o=new G.Graphic.OD([e.opts.centerPoint,e.opts.targetPoint],null,{curvature:e.opts.curvature,lineWidth:e.opts.unlineWidth,direction:e.opts.direction,lineColor:e.opts.UnlineColor,lineOpacity:e.opts.UnlineOpacity});o.addTo(e.opts.baseMap.layers.od),e.OdLayer=o},p.prototype.destory=function(){var e=this;e.OdLayer&&(e.OdLayer.remove(),delete e.OdLayer),e.layer&&(e.layer.remove(),delete e.layer)},c.prototype.initialize=function(){var e=this;e.type=e.opts.type;var t=$('<div id="'+e.opts.id+'" style="position:absolute;'+(e.opts.style||"left:0;top:0;")+'" class="'+(e.opts.className||"suspendbox")+'">'+e.opts.innerHtml+"</div>");"enable"==e.opts.draggable&&t.find(".tb_tit").addClass("cursor_move"),t.find(".help-contentHtml").html('<div style="text-align:center;"><div class="common-loading"><div class="load-container"><span class="pillar" style="animation-delay:.1s;"></span><span class="pillar" style="animation-delay:.2s;"></span><span class="pillar" style="animation-delay:.3s;"></span><span class="pillar" style="animation-delay:.4s;"></span><span class="pillar" style="animation-delay:.5s;"></span><span class="pillar" style="animation-delay:.6s;"></span><p>loading</p></div></div></div>'),t.find(".btn-close").click(function(){e.gMap.removeMapTip(e),"function"==typeof e.opts.eventListener.close&&e.opts.eventListener.close($(this)),e.gMap.removeOverlay("highLightLayer","dataVizHighLight")}),t.find(".help-screwed").click(function(){var t=$(this);e.opts.screwed?(e.opts.screwed=!1,t.removeClass("open").addClass("closed"),e.mapLine&&(e.mapLine.remove(),delete e.mapLine)):(e.opts.screwed=!0,t.removeClass("closed").addClass("open"),e.drawMapLine()),"function"==typeof e.opts.eventListener.screwed&&e.opts.eventListener.screwed(e.opts.screwed)}),e.$node=t,e.opts.eventListener.mouseover&&t.mouseover(function(t){e.opts.eventListener.mouseover(t,e)}),e.opts.eventListener.mouseout&&t.mouseout(function(t){e.opts.eventListener.mouseout(t,e)})},c.prototype.setPosition=function(e){if(!this.hidden){var t=this,o=t.gMap.gmap;e&&(t.opts.point=e);var a=(t.gMap.mapContainer,o.toScreen([t.opts.point[0],t.opts.point[1]])),i={left:0,top:0},r=t.$node.outerHeight(!0),n=t.$node.outerWidth(!0),l=o.getSize();if(!n||!r){var s=t.$node.children("div:eq(0)");r||(r=s.outerHeight(!0)),n||(n=s.outerWidth(!0))}if(t.opts.position)switch(t.opts.position){case"top":i={top:a[1]-r,left:a[0]-n/2};break;case"bottom":i={top:a[1],left:a[0]-n/2};break;case"left":i={top:a[1]>r/2?a[1]-r/2:0,left:a[0]-n};break;case"right":i={top:a[1]>r/2?a[1]-r/2:0,left:a[0]}}else a[0]>n&&a[0]<l[0]-n/2?(i.top=a[1]>r?a[1]-r:a[1],i.left=a[0]-n/2):a[0]<r?(i.left=a[0],i.top=a[1]>r/2?a[1]-r/2:0):a[0]>l[0]-n/2?(i.left=a[0]-n,i.top=a[1]>r/2?a[1]-r/2:0):(i.left=a[0]-t.$node.width()/2,i.top=a[1]>r?a[1]-t.$node.height():a[1]);"function"==typeof t.opts.getOffset?(t.opts.offset=$.extend(!0,t.opts.offset,t.opts.getOffset({width:n,height:r})),$.each(Object.keys(t.opts.offset),function(e,o){var a=t.opts.offset[o];if(a)switch(o){case"left":i.left=i.left+a;break;case"top":i.top=i.top+a}})):(i.top=i.top<a[1]?i.top-t.opts.offset.top:i.top+t.opts.offset.bottom,i.left<=a[0]-n?i.left=i.left-t.opts.offset.left:i.left>=a[0]&&(i.left=i.left+t.opts.offset.right)),t.$node.css({left:i.left+"px",top:i.top+"px"})}},c.prototype.draggable=function(){var e=this;"string"==typeof arguments[0]?"enable"==arguments[0]?e.$node.draggable("enable"):e.$node.draggable("disabled"):"enable"==e.opts.draggable&&e.$node.draggable({containment:"parent",scroll:!1,handle:".cursor_move",drag:function(t){e.opts.screwed||(e.opts.screwed=!0,e.$node.find(".help-screwed").removeClass("closed").addClass("open")),e.drawMapLine()}})},c.prototype.drawMapLine=function(){var e=this,t=e.gMap.gmap,o=e.opts.isBrokenLine,a=e.gMap.mapContainer,i=GetAbsPoint(a),r=GetAbsPoint(e.$node[0]),n=r.x-i.x,l=r.y-i.y,s=e.$node.width();e.$node.height();if(l+=20,n+=s/2,o)var p=t.toMap([n,l]),c=[p[0],e.opts.point[1]],d=[p,c,e.opts.point];else var p=t.toMap([n,l]),d=[p,e.opts.point];if(e.mapLine)e.mapLine.updateGeom(d);else{var u=e.mapLine=new G.Graphic.Polyline(d,null,e.opts.polylineStyle);e.layer=u,u.addTo(e.gMap.layers.mapTip)}},c.prototype.destroy=function(){this.mapLine&&(this.mapLine.remove(),delete this.mapLine),this.$node.remove()},c.prototype.show=function(){this.hidden=!1,this.$node.show()},c.prototype.hide=function(){this.mapLine&&(this.mapLine.remove(),delete this.mapLine),this.hidden=!0,this.$node.hide()},c.prototype.setContentHtml=function(e){this.$node.find(".help-contentHtml").html(e),this.scroll()},c.prototype.scroll=function(){var e=this;e.$node.find(".nicescroll-rails").length>0?e.$node.find(".nice-scroll").getNiceScroll().resize():e.$node.find(".nice-scroll").niceScroll(e.opts.niceScroll)},d.prototype.initialize=function(){var e=this;if(e.type=e.opts.type,e.opts.points.length>=2){var t=new G.Graphic.Arrow(e.opts.points,null,e.opts.arrowOptions);t.addTo(e.opts.baseMap.layers.arrow),e.layer=t,e.opts.baseMap.addOverlay("arrow",e.opts.data&&e.opts.data.iID?e.opts.data.iID:0,e)}else e.opts.open&&e.open()},d.prototype.close=function(){var e=this;e.drawLayer&&e.drawLayer.endDraw()},d.prototype.open=function(){var e=this;e.drawLayer=new G.Layer.Draw,e.drawLayer.addTo(e.gmap),e.drawLayer.startDraw("arrow",e.opts.arrowOptions),e.drawLayer.addListener("drawEnd",e.eventListener.drawEnd)},d.prototype.hide=function(){var e=this;e.drawLayer&&e.drawLayer.hide(),e.layer&&(e.layer.zindex=-1),e.opts.baseMap.layers.arrow&&e.opts.baseMap.layers.arrow.hide()},d.prototype.show=function(){var e=this;e.drawLayer&&e.drawLayer.show(),e.opts.baseMap.layers.arrow&&e.opts.baseMap.layers.arrow.show()},d.prototype.destory=function(){var e=this;e.drawLayer&&(e.drawLayer.remove(),delete e.drawLayer),e.layer&&(e.layer.remove(),delete e.layer)},u.prototype.init=function(){var e=this,t=new G.Layer.Html;t.addTo(e.opts.baseMap.gmap),e.layer=t},u.prototype.add=function(e){var t=this;e=$.extend(!0,{offset:[-80,-80]},e),t.layer&&(t.layer.addHtml('<div id="'+e.id+'" style="width: 160px; height: 160px; left:'+e.offset[0]+"px; top:"+e.offset[0]+'px"></div>',e.x,e.y),t.htmls.push(e.id))},u.prototype.destory=function(){var e=this;e.layer&&(e.layer.remove(),e.htmls=[],delete e.layer)},u.prototype.remove=function(e){var t=this;if(t.layer){var o=t.htmls.indexOf(e);t.layer.removeHtml(o),t.htmls.splice(o,1)}},h.prototype.open=function(e,t){var o=this;o.close(),o.remove(),o.baseMap.draw={};var a=o.baseMap.draw;a.drawLayer=new G.Layer.Draw,a.drawLayer.addTo(o.baseMap.gmap),a.drawLayer.startDraw(e,t)},h.prototype.close=function(){var e=this,t=e.baseMap.draw;t&&(t.drawLayer&&t.drawLayer.endDraw(),t.htmlLayer&&t.htmlLayer.removeHtml(t.id),t.id&&delete t.id)},h.prototype.remove=function(){var e=this,t=e.baseMap.draw;t&&(t.drawLayer&&t.drawLayer.clear(),t.htmlLayer&&t.htmlLayer.clear())},h.prototype.removeMeasure=function(){var e=this;e.measureShowTip&&e.measureShowTip.remove()},h.prototype.destory=function(){var e=this,t=e.baseMap.draw;t&&t.drawLayer&&t.drawLayer.remove(),t&&t.htmlLayer&&t.htmlLayer.remove(),delete e.baseMap.draw},h.prototype.getArea=function(e){$.ajax({url:"http://tools.citymap.fang.com/s/geom/area?ak="+O.ak,type:"GET",dataType:"jsonp",data:{geometries:JSON.stringify([e.geom]),geodetic:!0},success:function(e){if(0==e.code){var t="多边形面积："+e.data[0]/1e6+"k㎡";alert(t)}},error:function(){console.log("area error")}})},h.prototype.getPolylineLength=function(e){var t=e.length,o=I.Mercator.gcj02(e[t-1]),a=I.Mercator.gcj02(e[t-2]);return G.GeodeticUtil.sphereDistance(o,a)},h.prototype.bindEvent=function(){var e=this;e.baseMap.draw.drawLayer.addListener("drawEnd",function(t){if(e.limit&&(window.drawCacheGeom=null),e.type&&e.limit&&"circle"==e.type){var o=H(t.graphic.geom);if(o>e.limit.radius){var a=t.graphic.geom,i=[a[0],a[1]],r=R(i,e.limit.radius);t.graphic.updateGeom([a[0],a[1],r])}}if(e.type&&e.measure&&"circle"==e.type&&e.measureShowTip){var o=H(t.graphic.geom);e.measureShowTip.updateOptions({text:"半径:"+D("length",o)})}if(e.type&&"circle"==e.type){var o=H(t.graphic.geom);t.graphic.attrs.radius=o}return e.callback&&"function"==typeof e.callback.drawEnd&&e.callback.drawEnd(t,e),e.callback&&"function"==typeof e.callback.graphicClick&&(t.graphic.options.clickable=!0,t.target.bind("graphicClicked",function(){e.callback.graphicClick(t,t.graphic.geom)})),e.drawLayer&&e.drawLayer.bringToBottom(),stopBubble(t),preventDefault(t)}),e.baseMap.draw.drawLayer.addListener("drawStart",function(t){return e.isSingle&&e.remove(),e.callback&&"function"==typeof e.callback.drawStart&&e.callback.drawStart(t,e),stopBubble(t),preventDefault(t)}),e.baseMap.draw.drawLayer.addListener("draw",function(t){if(e.limit){var o=e.type,a=e.limit.area,i=e.limit.length,r=e.limit.radius,n=$.extend(!0,[],t.graphic.geom),l=$.extend(!0,[],t.graphic.bbox);if("rect"==o){var s=e.getPolylineLength([[l[0],l[1]],[l[2],l[3]]]),p=$.map(n,function(e,t){if(0==t||e!=n[0])return e});if(p.length<3)return;var c=k(p),d=c.num>a||s>i}if("circle"==o)var s=H(n),d=s>r;if(o&&d){window.drawCacheGeom||(window.drawCacheGeom=$.extend(!0,[],n));var u=$.extend(!0,[],window.drawCacheGeom);t.graphic.updateGeom(u)}else window.drawCacheGeom=null}if(e.measure){var o=e.type,n=$.extend(!0,[],t.graphic.geom),l=$.extend(!0,[],t.graphic.bbox);if("rect"==o){var s=e.getPolylineLength([[l[0],l[1]],[l[2],l[3]]]),p=$.map(n,function(e,t){if(0==t||e!=n[0])return e});if(p.length<3)return;var c=k(p);if(e.limit&&e.limit.area)var d=c.num>e.limit.area;else var d=!1;var h=[l[0]+(l[2]-l[0])/2,l[1]+(l[3]-l[1])/2],f=d?a>1e6?(a/1e6).toFixed(2)+"k㎡":parseInt(a)+"㎡":c.area+c.unit;e.measureShowTip?(e.measureShowTip.updateOptions({text:f}),d||e.measureShowTip.updateGeom(h)):(e.measureShowTip=new G.Graphic.Point(h,{name:"rectTip"},$.extend(!0,{shape:"text",size:[12,12],offset:[0,0],fillColor:"#000",text:f},e.measure.option?e.measure.option:{})),e.measureShowTip.addTo(e.baseMap.draw.drawLayer))}if("circle"==o){var s=H(n),d=!1;e.limit&&e.limit.radius&&(d=s>e.limit.radius);var h=[n[0],n[1]],m=d?r:s,y=m>1e3?parseFloat(m/1e3).toFixed(2)+"km":parseInt(m)+"m";e.measureShowTip?e.measureShowTip.updateOptions({text:"半径:"+y}):(e.measureShowTip=new G.Graphic.Point(h,{name:"rectTip"},$.extend(!0,{shape:"text",size:[12,12],offset:[0,0],fillColor:"#000",text:"半径:"+y},e.measure.option?e.measure.option:{})),e.measureShowTip.addTo(e.baseMap.draw.drawLayer))}}})},f.prototype=new h,f.prototype.measure=function(){var e=this,t=e.baseMap.draw;e.drawKey="drawWait",t.htmlLayer||(t.htmlLayer=(new G.Layer.Html).addTo(e.baseMap.gmap)),e.followObj||(t.id=t.htmlLayer.addHtml(e.gethtml(),0,0),e.followObj=t.htmlLayer.getHtml(t.id)),e.baseMap.gmap.bind("mousemove",e.mousemoveEvent),t.drawLayer.addListener("drawStart",function(o){e.isSingle&&(e.remove(),t.id=t.htmlLayer.addHtml(e.gethtml(),0,0),e.followObj=t.htmlLayer.getHtml(t.id)),e.baseMap.gmap.bind("mousemove",e.mousemoveEvent),e.drawKey="drawStart",e.points=o.graphic.geom[0],e.callback&&"function"==typeof e.callback.drawStart&&e.callback.drawStart(o,e)}),t.drawLayer.addListener("draw",function(t){e.points=t.graphic.geom[0]}),t.drawLayer.addListener("drawEnd",function(t){e.drawKey="drawEnd",e.followObj&&$(e.followObj).find(".tool_followTip_content").hide(),e.bindDel(t),e.callback&&"function"==typeof e.callback.drawEnd&&e.callback.drawEnd(t,e)})},f.prototype.bindDel=function(e){var t=this,o=t.baseMap.draw,a=e.graphic.geom[0];t.area=k(a);var i='<div id="tool_followTip" class="map_tool_followTip"><p class="tool_followTip_content" style="">总面积：                <span class="tool_followTip_num">'+t.area.area+'</span><span class="tool_followTip_unit">'+t.area.unit+'</span>                 </p><a href="javascript:;" class="tool_followTip_del">×</a></div>',r=o.htmlLayer.addHtml(i,a[a.length-1][0],a[a.length-1][1]),n=o.htmlLayer.getHtml(r);$(n).find(".tool_followTip_del").click(function(t){o.htmlLayer.removeHtml(r),e.graphic.remove()})},f.prototype.gethtml=function(){return'<div class="map_tool_followTip susp_tool_followTip"><span class="icon_tool_area"></span>             <p class="tool_followTip_content" style="">总面积：<span class="tool_followTip_num">0</span>             <span class="tool_followTip_unit">k㎡</span></p><p class="tool_followTip_tip">单击确定地点，双击结束</p>                            </div>'},m.prototype=new h,m.prototype.unitConversion=function(e){return{value:e>1e3?(e/1e3).toFixed(2):(e-0).toFixed(0),unit:e>1e3?"km":"m"}},m.prototype.measure=function(){var e=this,t=e.baseMap.draw;e.drawKey="drawWait",e.cache={},t.htmlLayer||(t.htmlLayer=(new G.Layer.Html).addTo(e.baseMap.gmap)),e.followObj||(t.id=t.htmlLayer.addHtml(e.gethtml(),0,0),e.followObj=t.htmlLayer.getHtml(t.id),$(e.followObj).css("z-index",1)),e.baseMap.gmap.bind("mousemove",e.mousemoveEvent),t.drawLayer.addListener("drawStart",function(o){e.isSingle&&(e.remove(),t.id=t.htmlLayer.addHtml(e.gethtml(),0,0),e.followObj=t.htmlLayer.getHtml(t.id),$(e.followObj).css("z-index",1)),e.cache={htmlIds:[],pointOverlays:[],lengths:[]},e.baseMap.gmap.bind("mousemove",e.mousemoveEvent),e.drawKey="drawStart",e.points=o.graphic.geom;var a=o.graphic.geom;e.dealhtml(a,"drawStart"),e.dealPoint(a),e.callback&&"function"==typeof e.callback.drawStart&&e.callback.drawStart(o,e)}),t.drawLayer.addListener("draw",function(t){e.points=t.graphic.geom;var o=t.graphic.geom;e.dealhtml(o,"draw"),e.dealPoint(o)}),t.drawLayer.addListener("drawEnd",function(t){e.drawKey="drawEnd",e.followObj&&$(e.followObj).find(".tool_followTip_content").hide(),e.bindDel(t,e.cache),e.callback&&"function"==typeof e.callback.drawEnd&&e.callback.drawEnd(t,e)})},m.prototype.dealPoint=function(e){var t=this,o=t.baseMap.draw,a=e[e.length-1],i=new G.Graphic.Point(a,{},t.pointStyle);i.addTo(o.drawLayer),t.cache.pointOverlays.push(i)},m.prototype.dealhtml=function(e,t){var o=this,a=o.baseMap.draw;if("draw"==t){var i=o.getPolylineLength(e);o.cache.lengths.push(i);var r=0;o.cache.lengths.length>0&&o.cache.lengths.forEach(function(e){r+=e});var n=o.unitConversion(r),l='<div id="tool_followTip" class="map_tool_followTip" style="'+o.wordStyle+'"><p class="tool_followTip_content" style=""><span class="tool_followTip_num">'+n.value+'</span>                                    <span class="tool_followTip_unit">'+n.unit+"</span></p>                            </div>"}else if("drawStart"==t)var l='<div id="tool_followTip" class="map_tool_followTip" style="'+o.wordStyle+'"><p class="tool_followTip_content" style="">起点</p></div>';var s=a.htmlLayer.addHtml(l,e[e.length-1][0],e[e.length-1][1]);o.cache.htmlIds.push(s)},m.prototype.bindDel=function(e,t){var o=this,a=o.baseMap.draw,i=$.extend(!0,{},t),r=e.graphic.geom,n=(o.getPolylineLength(r),0);o.cache.lengths.length>0&&o.cache.lengths.forEach(function(e){n+=e});var l=o.unitConversion(n),s='<div id="tool_followTip" class="map_tool_followTip" style="'+o.wordStyle+'"><p class="tool_followTip_content" style="">总长：<span class="tool_followTip_num">'+l.value+'</span>                                    <span class="tool_followTip_unit">'+l.unit+'</span></p>                                <a href="javascript:;" class="tool_followTip_del">×</a>                            </div>',p=a.htmlLayer.addHtml(s,r[r.length-1][0],r[r.length-1][1]);i.htmlIds.push(p),a.ids||(a.ids={}),a.ids[p]=a.htmlLayer.getHtml(p);var c=a.htmlLayer.getHtml(p);$(c).find(".tool_followTip_del").click(function(t){i.htmlIds.length>0&&i.htmlIds.forEach(function(e){a.htmlLayer.removeHtml(e)}),i.pointOverlays.length>0&&i.pointOverlays.forEach(function(e){e.remove()}),e.graphic.remove()})},m.prototype.gethtml=function(){return'<div class="map_tool_followTip susp_tool_followTip" style="'+this.tipStyle+'"><span class="icon_tool_distance"></span>            <p class="tool_followTip_content" style="">总长：<span class="tool_followTip_num">0</span>             <span class="tool_followTip_unit">km</span></p><p class="tool_followTip_tip">单击确定地点，双击结束</p>                            </div>'},y.prototype=new h,v.prototype=new h,g.prototype=new h,w.prototype={initEvent:function(){var e=this;this.mousemoveEvent=function(t){e.isOpen&&e.tipGraphic.updateGeom([t.mapX,t.mapY])},this.clickEvent=function(t){if(e.isOpen){var o=e.tipGraphic.clone();o.updateGeom([t.mapX,t.mapY]),o.addTo(e.layer),e.callback.draw&&"function"==typeof e.callback.draw&&e.callback.draw(o),e.isSingle&&e.close()}}},open:function(){this.tipGraphic=new G.Graphic.Point([0,0],{},this.opts),this.isBind||this.bind(),this.isOpen=!0},close:function(){this.isOpen=!1,this.tipGraphic.remove(),this.callback.close&&"function"==typeof this.callback.close&&this.callback.close()},remove:function(){this.layer&&this.layer.clear()},bind:function(){this.isBind=!0,this.layer=(new G.Layer.Graphic).addTo(this.gmap),this.tipGraphic.addTo(this.layer),this.gmap.bind("mousemove",this.mousemoveEvent),this.gmap.bind("click",this.clickEvent)},unbind:function(){this.isBind=!1,this.layer.remove(),this.layer=null,this.gmap.bind("mousemove",this.mousemoveEvent),this.gmap.bind("click",this.clickEvent)},destory:function(){this.close(),this.unbind()}},x.prototype.init=function(){var e=this,t="",o=e.container,a=e.drawCanvas;t+='<div class="screenshot-cont">               <div class="function_icon_box clearfix">                    <ul class="funct-list fl">                        <li data-drawtype="rect"><a href="javascript:;" title="矩形工具"><em class="ficon f_rectangle"></em></a></li>                        <li data-drawtype="ellipse"><a href="javascript:;" title="椭圆工具"><em class="ficon f_oval"></em></a></li>                        <li data-drawtype="arrow"><a href="javascript:;" title="箭头工具"><em class="ficon f_arrow"></em></a></li>                        <li data-drawtype="text"><a href="javascript:;" title="文字工具"><em class="ficon f_text"></em></a></li>                    </ul>                    <div class="v-line fl"></div>                    <ul class="funct-list fl">                        <li data-tool-type="revoke"><a href="javascript:;" title="撤销编辑"><em class="ficon f_cancel"></em></a></li>                        <li data-tool-type="cancel"><a href="javascript:;" title="退出"><em class="ficon f_quit"></em></a></li>                        <li data-tool-type="complate"><a href="javascript:;" title="完成"><em class="ficon f_finished"></em></a></li>                    </ul>                </div>          </div>          <div class="function_more_panel" style="display:block">            <div class="function_more_cont clearfix">                <ul class="funct-list fl">                    <li data-draw-storkewidth="1" class="on"><a href="javascript:;"><em class="ficon f_circle_sm"></em></a></li>                    <li data-draw-storkewidth="2"><a href="javascript:;"><em class="ficon f_circle_md"></em></a></li>                    <li data-draw-storkewidth="3"><a href="javascript:;"><em class="ficon f_circle_lg"></em></a></li>                </ul>                <div class="v-line fl"></div>                <div class="color_panel fl">                    <div class="current-color-container fl"><div class="current-color"></div></div>                    <div class="color-list-box fl">                        <ul>',e.colorSet.forEach(function(e){t+='<li data-draw-storkecolor="'+e+'"><div style="background-color:'+e+';"></div></li>'}),t+="</ul></div></div></div></div>",o.length>0&&(o.empty().append(t),o.find(".current-color").css("background-color",e.color),o.find(".funct-list li[data-draw-storkewidth="+e.width+"]").addClass("on").siblings().removeClass("on"),a.option.color=e.color,a.option.width=e.width),e.bindEvent(),e.callback.init&&"function"==typeof e.callback.init&&e.callback.init()},x.prototype.bindEvent=function(){var e=this,t=e.container;t.find(".function_icon_box .funct-list li").unbind("click").bind("click",function(o){var a=$(this).data("drawtype"),i=$(this).data("tool-type");if(a&&($(this).addClass("on").siblings().removeClass("on"),e.drawCanvas.open(a)),i)switch(i){case"revoke":e.drawCanvas.revoke();break;case"cancel":e.hide(),e.drawCanvas.remove(),e.drawCanvas.close(),t.find(".function_icon_box .funct-list li[data-drawtype]").removeClass("on"),e.callback.close&&"function"==typeof e.callback.close&&e.callback.close();break;case"complate":e.hide(),e.drawCanvas.save(),e.drawCanvas.close(),t.find(".function_icon_box .funct-list li[data-drawtype]").removeClass("on"),e.callback.save&&"function"==typeof e.callback.save&&e.callback.save()}}),t.find(".function_more_cont .funct-list li").unbind("click").bind("click",function(t){$(this).addClass("on").siblings().removeClass("on");var o=$(this).data("draw-storkewidth");e.drawCanvas.option.width=o}),t.find(".function_more_cont .color-list-box li").unbind("click").bind("click",function(o){var a=t.find(".current-color"),i=$(this).data("draw-storkecolor");e.drawCanvas.option.color=i,a.css("background-color",i)})},x.prototype.hide=function(){var e=this;e.container.hide(),e.drawCanvas.close(),e.callback.hide&&"function"==typeof e.callback.hide&&e.callback.hide()},x.prototype.show=function(){var e=this;e.container.show(),e.callback.show&&"function"==typeof e.callback.show&&e.callback.show()},x.prototype.destroy=function(){var e=this;e.container.empty(),e.drawCanvas.destroy()},x.prototype.remove=function(){this.drawCanvas.remove()},L.prototype.init=function(){var e=this,t=$(".g-layers-frame>canvas"),o=t.attr("width"),a=t.attr("height");e.htmlLayer=(new G.Layer.Html).addTo(e.map),e.id=e.htmlLayer.addHtml('<div><canvas id="drawCanvas" width="'+o+'" height="'+a+'"></canvas></div>',0,0),e.htmlObj=e.htmlLayer.getHtml(e.id),$(e.htmlObj).attr("style","transform: translate3d(-0, 0, 0px);"),e.$canvas=$(e.htmlObj).find("#drawCanvas"),e.$canvas.parent().parent().attr("style","transform: translate3d(-0, 0, 0px);"),e.htmlLayer.bringToTop(),e.layerPointsSet=[],e.dragEnable=!0,e.isStart=!0},L.prototype.initEvent=function(){var e=this;e.mousemoveEvent=function(t){e.type;return"start"==e.flag&&function(){var o=[t.screenX,t.screenY],a=[t.mapX,t.mapY],i=$.extend(!0,[],e.points),r=$.extend(!0,[],e.layerPoints);i.push(o),r.push(a),e.selectTypeFun(e.type,i,r),e.$canvas.parent().parent().attr("style","transform: translate3d(-0, 0, 0px);")}(),stopBubble(t),preventDefault(t)},e.doubleclickEvent=function(t){if("line"==e.type&&"start"==e.flag){e.flag="end";var o=[t.screenX,t.screenY],a=[t.mapX,t.mapY];e.layerPoints.push(a),e.points.push(o),e.selectTypeFun(e.type,e.points,e.layerPoints),e.$canvas.parent().parent().attr("style","transform: translate3d(-0, 0, 0px);")}return stopBubble(t),preventDefault(t)},e.clickEvent=function(t){function o(){var o=[t.screenX,t.screenY],a=[t.mapX,t.mapY];e.layerPoints.push(a),e.points.push(o),e.selectTypeFun(e.type,e.points,e.layerPoints),e.$canvas.parent().parent().attr("style","transform: translate3d(-0, 0, 0px);")}e.htmlLayer.bringToTop();var a=e.type;if("text"!=e.type||e.isStart)return"start"==e.flag?("ellipse"==a&&(e.flag="end"),o()):(e.flag="start",e.points=[],e.layerPoints=[],o()),stopBubble(t),preventDefault(t)},e.mousedownEvent=function(t){function o(){var o=t.layerX<0?[t.offsetX,t.offsetY]:[t.layerX,t.layerY];e.layerPoints.push(e.map.toMap(o)),e.points.push(o),e.selectTypeFun(e.type,e.points,e.layerPoints),e.$canvas.parent().parent().attr("style","transform: translate3d(-0, 0, 0px);")}if(!e.dragEnable){t.stopPropagation();e.type;if("text"==e.type&&!e.isStart)return;"start"==e.flag?(e.flag="end",o()):(e.flag="start",e.points=[],e.layerPoints=[],o())}},e.mouseupEvent=function(t){e.type;if("text"!=e.type||e.isStart)return"start"==e.flag&&(e.flag="end",function(){var o=[t.screenX,t.screenY],a=[t.mapX,t.mapY];e.layerPoints.push(a),e.points.push(o),e.selectTypeFun(e.type,e.points,e.layerPoints),e.$canvas.parent().parent().attr("style","transform: translate3d(-0, 0, 0px);")}()),stopBubble(t),preventDefault(t)},e.zoomEndEvent=function(t){var o=[];e.layerPoints;$.extend(!0,[],e.layerPointsSet).forEach(function(t){var a=[];t.layerPoints.forEach(function(t){a.push(e.map.toScreen(t))}),o.push({id:t.id,type:t.type,points:a,layerPoints:t.layerPoints,text:t.text,color:t.color,width:t.width})}),e.$canvas.clearCanvas({x:0,y:0,width:1e4,height:1e4}),e.$canvas.removeLayers(),o.forEach(function(t){if("text"==t.type){var o=t.points[0][0]<t.points[1][0]?t.points[0]:t.points[1];$('.drawCanvasText[data-id="'+t.id+'"]').css({left:o[0],top:o[1]})}else e.selectTypeFun(t.type,t.points,t.layerPoints,t.width,t.color);e.id=null}),e.move(e.$canvas.parent().parent()),e.$canvas.restoreCanvas(),e.htmlLayer.bringToTop()},$(document).on("DOMNodeInserted",".drawCanvasText>div",function(){$(this).css("border","none")}),e.map.bind("zoomEnd",e.zoomEndEvent)},L.prototype.move=function(e){var t=$(e).css("transform"),o=t.match(/\-?[0-9]+\.?[0-9]*/g);o&&$(e).css({left:-o[4],top:-o[5]})},L.prototype.save=function(){var e=this;e.layerPoints;e.map.options.doubleZoom=!0,e.close()},L.prototype.revoke=function(){var e=this,t=e.layerPointsSet.length;t>0&&($.each(e.layerPointsSet,function(o,a){o==t-1&&("text"==a.type?$(e.htmlObj).find('.drawCanvasText[data-id="'+a.id+'"]').remove():e.$canvas.removeLayer(a.id).drawLayers())}),e.layerPointsSet.pop())},L.prototype.drawEllipse=function(e,t,o,a,i){var r=this;if(e.length>1){var n={layer:!0,name:i||(r.id?r.id:"line"+Math.random()),strokeStyle:a||r.option.color,strokeWidth:o||r.option.width,x:e[0][0],y:e[0][1]};n.width=2*Math.abs(e[1][0]-e[0][0]),n.height=2*Math.abs(e[1][1]-e[0][1]),r.id?r.$canvas.setLayer(r.id,n).drawLayers():(r.id=n.name,r.$canvas.drawEllipse(n)),"end"!=r.flag||i||(r.layerPointsSet.push({id:r.id,type:r.type,layerPoints:$.extend(!0,[],t),points:$.extend(!0,[],e),width:r.option.width,color:r.option.color}),r.points=[],r.id=null,r.layerPoints=[],r.flag=null)}},L.prototype.drawRect=function(e,t,o,a,i){var r=this;if(e.length>1){var n={layer:!0,name:i||(r.id?r.id:"line"+Math.random()),strokeStyle:a||r.option.color,strokeWidth:o||r.option.width,fromCenter:!1,x:e[0][0]<e[1][0]?e[0][0]:e[1][0],y:e[0][1]<e[1][1]?e[0][1]:e[1][1]};n.width=Math.abs(e[1][0]-e[0][0]),n.height=Math.abs(e[1][1]-e[0][1]),r.id?r.$canvas.setLayer(r.id,n).drawLayers():(r.id=n.name,r.$canvas.drawRect(n)),"end"!=r.flag||i||(r.layerPointsSet.push({id:r.id,type:r.type,layerPoints:$.extend(!0,[],t),points:$.extend(!0,[],e),width:r.option.width,color:r.option.color}),r.points=[],r.id=null,r.layerPoints=[],r.flag=null)}},L.prototype.open=function(e){var t=this;t.close(),t.type=e,t.isStart=!0,t.mapStatus("open"),"line"==t.type&&(t.map.bind("click",t.clickEvent),t.map.bind("mousemove",t.mousemoveEvent),t.map.bind("doubleclick",t.doubleclickEvent)),"ellipse"!=t.type&&"arrow"!=t.type&&"rect"!=t.type&&"text"!=t.type||(t.mapFrame.addEventListener("mousedown",t.mousedownEvent),t.map.bind("mousemove",t.mousemoveEvent),t.map.bind("mouseup",t.mouseupEvent))},L.prototype.close=function(){var e=this;e.points=[],e.flag=!1,e.layerPoints=[],e.id=null,e.mapStatus("close"),e.unbind()},L.prototype.destroy=function(){var e=this;e.htmlLayer&&e.htmlLayer.remove(),e.unbind(),e.map.unbind("zoomEnd",e.zoomEndEvent)},L.prototype.mapStatus=function(e){this.map.options.doubleZoom="open"!=e,this.dragEnable="open"!=e},L.prototype.resetFlags=function(){this.points=[],this.flag=!1,this.layerPoints=[],this.id=null},L.prototype.unbind=function(){var e=this;e.map.unbind("click",e.clickEvent),e.map.unbind("mousemove",e.mousemoveEvent),e.map.unbind("doubleclick",e.doubleclickEvent),e.mapFrame.removeEventListener("mousedown",e.mousedownEvent),e.map.unbind("mousemove",e.mousemoveEvent),e.map.unbind("mouseup",e.mouseupEvent)},L.prototype.remove=function(){var e=this;e.$canvas.clearCanvas({x:0,y:0,width:1e4,height:1e4}),e.$canvas.removeLayers(),e.resetFlags(),e.layerPointsSet=[],$(".drawCanvasText").remove()},L.prototype.selectTypeFun=function(e,t,o,a,i,r){var n=this;switch(e){case"line":n.drawLine(t,o,a,i,r);break;case"ellipse":n.drawEllipse(t,o,a,i,r);break;case"arrow":n.drawArrow(t,o,a,i,r);break;case"rect":n.drawRect(t,o,a,i,r);break;case"text":n.drawTextInput(t,o)}},L.prototype.drawArrow=function(e,t,o,a,i){var r=this;if(!(e.length<2)){var n={penWidth:o||r.option.width};n.penWidth=3*n.penWidth;var l=e[0][0],s=e[0][1],p=e[1][0],c=e[1][1],o=p-l,d=c-s,u=Math.sqrt(Math.pow(o,2)+Math.pow(d,2)),h=d/u,f=(Math.asin(h),o/u);if(5*n.penWidth>u/4)var m=l+3*o/4,y=s+3*d/4;else var m=p-5*f*n.penWidth,y=c-5*h*n.penWidth;var v=m-h*n.penWidth*2,g=f*n.penWidth*2+y,w=h*n.penWidth*2+m,b=y-f*n.penWidth*2,x=m-h*n.penWidth,L=f*n.penWidth+y,M=h*n.penWidth+m,k=y-f*n.penWidth,T={layer:!0,name:i||(r.id?r.id:"line"+Math.random()),strokeStyle:a||r.option.color,fillStyle:a||r.option.color,strokeWidth:1,x1:l,y1:s,x2:x,y2:L,x3:v,y3:g,x4:p,y4:c,x5:w,y5:b,x6:M,y6:k,x7:l,y7:s,close:!0};r.id?r.$canvas.setLayer(r.id,T).drawLayers():(r.id=T.name,r.$canvas.drawLine(T),r.$canvas.restoreCanvas()),"end"!=r.flag||i||(r.layerPointsSet.push({id:r.id,type:r.type,layerPoints:$.extend(!0,[],t),points:$.extend(!0,[],e),width:r.option.width,color:r.option.color}),r.points=[],r.id=null,r.layerPoints=[],r.flag=!1)}},L.prototype.drawLine=function(e,t){var o=this,a={layer:!0,name:o.id?o.id:"line"+Math.random(),strokeStyle:o.option.color,strokeWidth:o.option.width,rounded:!0};e.forEach(function(e,t){a["x"+(t+1)]=e[0],a["y"+(t+1)]=e[1]}),o.id?o.$canvas.setLayer(o.id,a).drawLayers():(o.id=a.name,o.$canvas.drawLine(a)),"end"==o.flag&&(o.layerPointsSet.push({id:o.id,type:o.type,layerPoints:$.extend(!0,[],o.layerPoints),points:$.extend(!0,[],o.points)}),o.points=[],o.id=null,o.layerPoints=[],o.flag=!1)},L.prototype.drawTextInput=function(e,t){var o=this;o.option.color;if(e.length>1){var a=(Math.abs(e[0][0]-e[1][0]),Math.abs(e[0][1]-e[1][1]),t[0]),i=t[1],r=e[0],n=e[1],l=(a[0],i[0],r[0]<n[0]?r:n);if("end"==o.flag){var s=o.option.width,p="text"+Math.random(),c='<div class="drawCanvasText" data-id="'+p+'" style="position:absolute;left:'+l[0]+"px;top:"+l[1]+'px;">            <div contenteditable="true"  style="white-space:nowrap;min-width:120px;max-width:10000px;min-height:30px;border:1px solid #9bbdf4;background-color: rgba(255, 255, 255, 0);color:'+o.option.color+";            font-size:"+(1==s?12:2==s?14:16)+'px;cursor:text;"></div></div>';$(o.htmlObj).append(c),o.isStart=!1}"end"==o.flag&&(o.layerPointsSet.push({type:"text",id:p,points:e,layerPoints:t}),o.points=[],o.layerPoints=[],o.id=null,o.flag=!1)}};var A=function(e){var t=e.length,o=I.Mercator.gcj02(e[t-1]),a=I.Mercator.gcj02(e[t-2]);return G.GeodeticUtil.sphereDistance(o,a)},H=function(e){if(e){var t=$.extend(!0,[],e),o=[t[0],t[1]],a=[t[0]+t[2],t[1]],i=I.Mercator.gcj02(o),r=I.Mercator.gcj02(a);return G.GeodeticUtil.sphereDistance(i,r)}},R=function(e,t){var o=G.Proj.WebMercator.unproject(e[0],e[1]),a=G.Proj.WebMercator.unproject(e[0]+t,e[1]),i=G.GeodeticUtil.sphereDistance(o,a);return Math.abs(t/i)*t},D=function(e,t){return"area"==e?t>1e10?(t/1e10).toFixed(2)+"万k㎡":t>1e6?(t/1e6).toFixed(2)+"k㎡":parseInt(t)+"㎡":"length"==e?t>1e3?(t/1e3).toFixed(2)+"km":parseInt(t)+"m":void 0};M.prototype={initEvent:function(){var e=this;e.mouseupEvent=function(t){if(e.moveStatus=!1,e.isEdit){if(e.isStartMove){if(e.callback.editEnd&&"function"==typeof e.callback.editEnd){if("circle"==e.editType){var o=H(e.graphic.geom);e.graphic.attrs.radius=o}e.callback.editEnd(e.graphic)}e.isStartMove=!1}return stopBubble(t),preventDefault(t)}},e.mousemoveEvent=function(t){if(e.isEdit){if(e.isStartMove){var o=$.extend(!0,[],e.graphic.geom),a=$.extend(!0,[],e.graphic.bbox),i=!1;if("rightPoint"==e.pointName&&"circle"==e.editType){var r=$.extend(!0,[],[o[0],o[1],Math.abs(t.mapX-o[0])]);if(e.limit&&e.limit.radius){var n=e.limit.radius,l=A($.extend(!0,[],[[o[0],o[1]],[t.mapX,o[1]]]));i=l>n}if(i||e.circleRightPointObj.updateGeom([t.mapX,o[1]]),i||e.graphic.updateGeom(r),e.measure){if(!l)var l=A($.extend(!0,[],[[o[0],o[1]],[t.mapX,o[1]]]));var s=[r[0],r[1]],p=i?n:l,c=D("length",p);e.measureShowTip?e.measureShowTip.updateOptions({text:"半径:"+c}):(e.measureShowTip=new G.Graphic.Point(s,{},$.extend(!0,{shape:"text",size:[12,12],offset:[0,0],fillColor:"#000",text:"半径:"+c},e.measure.option?e.measure.option:{})),e.measureShowTip.addTo(e.layer))}}if("rect"==e.editType){var d=function(t){if(e.limit.area){if(k(t).num>e.limit.area)return!0}if(e.limit.length){if(A($.extend(!0,[],[t[0],t[2]]))>e.limit.length)return!0}},r=$.extend(!0,[],o[0]);if("rightPoint"==e.pointName){r[1]=[t.mapX,r[1][1]],r[2]=[t.mapX,r[2][1]];var u=r[0][0]+(t.mapX-r[0][0])/2;e.limit&&(i=!!d(r)),i||e.rectRightPointObj.updateGeom($.extend(!0,[],[t.mapX,e.rectRightPointObj.geom[1]])),i||e.rectTopPointObj.updateGeom($.extend(!0,[],[u,e.rectTopPointObj.geom[1]])),i||e.graphic.updateGeom($.extend(!0,[],[r]))}if("topPoint"==e.pointName){r[2]=[r[2][0],t.mapY],r[3]=[r[3][0],t.mapY];var u=r[1][1]+(t.mapY-r[1][1])/2;e.limit&&(i=!!d(r)),i||e.rectRightPointObj.updateGeom($.extend(!0,[],[e.rectRightPointObj.geom[0],u])),i||e.rectTopPointObj.updateGeom($.extend(!0,[],[e.rectTopPointObj.geom[0],t.mapY])),i||e.graphic.updateGeom($.extend(!0,[],[r]))}if(e.measure){var s=[a[0]+(a[2]-a[0])/2,a[1]+(a[3]-a[1])/2],h=k(r),f=e.limit&&e.limit.area?e.limit.area:0,m=i?f>1e6?(f/1e6).toFixed(2)+"k㎡":parseInt(f)+"㎡":h.area+h.unit;e.measureShowTip?(e.measureShowTip.updateOptions({text:m}),i||e.measureShowTip.updateGeom(s)):(e.measureShowTip=new G.Graphic.Point(s,{},$.extend(!0,{shape:"text",size:[12,12],offset:[0,0],fillColor:"#000",text:m},e.measure.option?e.measure.option:{})),e.measureShowTip.addTo(e.layer))}}e.callback.limit&&"function"==typeof e.callback.limit&&e.callback.limit(i,e)}return stopBubble(t),preventDefault(t)}}},initEditLayer:function(){var e=this;if("circle"==e.editType){var t=(e.graphic.geom[0],e.graphic.geom[1],[e.graphic.geom[0]+e.graphic.geom[2],e.graphic.geom[1]]);e.circleRightPointObj=new G.Graphic.Point(t,{name:"rightPoint"},{shape:"circle",size:[12,12],offset:[0,0],fillColor:"#ff0",clickable:!0}),e.circleRightPointObj.addTo(e.layer)}if("rect"==e.editType){var o=e.graphic.bbox,a=[o[2],o[3]-Math.abs(o[3]-o[1])/2],i=[o[2]-Math.abs(o[2]-o[0])/2,o[1]];e.rectRightPointObj=new G.Graphic.Point(a,{name:"rightPoint"},{shape:"circle",size:[12,12],offset:[0,0],fillColor:"#ff0",clickable:!0}),e.rectTopPointObj=new G.Graphic.Point(i,{name:"topPoint"},{shape:"circle",size:[12,12],offset:[0,0],fillColor:"#ff0",clickable:!0}),e.rectRightPointObj.addTo(e.layer),e.rectTopPointObj.addTo(e.layer)}},showEditLayer:function(e){var t=this;t.layer&&(e?t.initEditLayer():(t.circleRightPointObj&&t.circleRightPointObj.remove(),t.rectRightPointObj&&t.rectRightPointObj.remove(),t.rectTopPointObj&&t.rectTopPointObj.remove()))},destory:function(){var e=this;e.layer&&(e.layer.clear(),e.isEdit=!1,e.graphic.remove(),e.circleRightPointObj&&e.circleRightPointObj.remove(),e.rectRightPointObj&&e.rectRightPointObj.remove(),e.rectTopPointObj&&e.rectTopPointObj.remove(),e.map.unbind("mouseup",e.mouseupEvent),e.map.unbind("mousemove",e.mousemoveEvent))},stopEdit:function(){this.moveStatus=!1,this.isStartMove=!1}};var F={top:function(){var e=$("#loading-top-progressbox");if(0==e.length){var t=document.createElement("style");t.innerHTML=".progressbox{position: fixed;top:0px;left:0;height: 2px;background:#a1e6fa;z-index:1060;box-shadow:0 0 4px 0 rgba(255,255,255,0.5)}\n        .animate{animation: progress 2s infinite;}\n        @keyframes progress{\n            0%{width:0;}\n            100%{width:100%;}\n        }",t.type="text/css",t.id="loading-top-progressstyle",document.getElementsByTagName("head")[0].appendChild(t),$("body").append('<div id="loading-top-progressbox" class="progressbox"></div>'),e=$("#loading-top-progressbox")}e.addClass("animate")},close:function(){var e=document.getElementById("loading-top-progressbox"),t=function t(){$("#loading-top-progressbox").removeClass("animate"),e.removeEventListener("webkitAnimationIteration",t)};e.addEventListener("webkitAnimationIteration",t)}};e.exports.gmap=a,e.exports.tip=c,e.exports.createMark=i,e.exports.drawArrow=d,e.exports.createCircle=s,e.exports.PointService=I,e.exports.polyLine=n,e.exports.polygon=r,e.exports.mapStyle=S,e.exports.mapType=j,e.exports.createOD=p,e.exports.createHtml=u,e.exports.gmapOptions=O,e.exports.loading=F,e.exports.drawPolygon=f,e.exports.drawPolyline=m,e.exports.drawRect=y,e.exports.drawCircle=g,e.exports.drawMark=w,e.exports.contains=b,e.exports.drawCanvas=L,e.exports.canvasLayer=x,e.exports.editGraphic=M,e.exports.getCircleRadius=H,e.exports.getSphereLength=R,e.exports.setMapLoading=function(e){z=e}},function(e,t,o){"use strict";function a(e,t,o){if("object"!=typeof(o=o||{}))throw new Error("options is invalid");var a=o.ignoreBoundary;if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var l=Object(n.a)(e),s=Object(n.b)(t),p=t.geometry?t.geometry.type:t.type,c=t.bbox;if(c&&!1===r(l,c))return!1;"Polygon"===p&&(s=[s]);for(var d=0,u=!1;d<s.length&&!u;d++)if(i(l,s[d][0],a)){for(var h=!1,f=1;f<s[d].length&&!h;)i(l,s[d][f],!a)&&(h=!0),f++;h||(u=!0)}return u}function i(e,t,o){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,r=t.length-1;i<t.length;r=i++){var n=t[i][0],l=t[i][1],s=t[r][0],p=t[r][1];if(e[1]*(n-s)+l*(s-e[0])+p*(e[0]-n)==0&&(n-e[0])*(s-e[0])<=0&&(l-e[1])*(p-e[1])<=0)return!o;l>e[1]!=p>e[1]&&e[0]<(s-n)*(e[1]-l)/(p-l)+n&&(a=!a)}return a}function r(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}Object.defineProperty(t,"__esModule",{value:!0});var n=o(3);t.default=a},function(e,t,o){"use strict";function a(e){if(!e)throw new Error("coord is required");if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates;if(Array.isArray(e)&&e.length>=2&&void 0===e[0].length&&void 0===e[1].length)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function i(e){if(!e)throw new Error("coords is required");if("Feature"===e.type&&null!==e.geometry)return e.geometry.coordinates;if(e.coordinates)return e.coordinates;if(Array.isArray(e))return e;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}o.d(t,"a",function(){return a}),o.d(t,"b",function(){return i});o(0)},function(e,t,o){"use strict";function a(e){return Object(s.a)(e,function(e,t){return e+i(t)},0)}function i(e){var t,o=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)o+=r(e.coordinates[t]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<e.geometries.length;t++)o+=i(e.geometries[t]);return o}}function r(e){var t=0;if(e&&e.length>0){t+=Math.abs(n(e[0]));for(var o=1;o<e.length;o++)t-=Math.abs(n(e[o]))}return t}function n(e){var t,o,a,i,r,n,s,c=0,d=e.length;if(d>2){for(s=0;s<d;s++)s===d-2?(i=d-2,r=d-1,n=0):s===d-1?(i=d-1,r=0,n=1):(i=s,r=s+1,n=s+2),t=e[i],o=e[r],a=e[n],c+=(l(a[0])-l(t[0]))*Math.sin(l(o[1]));c=c*p*p/2}return c}function l(e){return e*Math.PI/180}Object.defineProperty(t,"__esModule",{value:!0});var s=o(5),p=6378137;t.default=a},function(e,t,o){"use strict";function a(e,t){var o,a,i,r,n,l,s,p,c,d,u=0,h="FeatureCollection"===e.type,f="Feature"===e.type,m=h?e.features.length:1;for(o=0;o<m;o++){for(l=h?e.features[o].geometry:f?e.geometry:e,p=h?e.features[o].properties:f?e.properties:{},c=h?e.features[o].bbox:f?e.bbox:void 0,d=h?e.features[o].id:f?e.id:void 0,s=!!l&&"GeometryCollection"===l.type,n=s?l.geometries.length:1,i=0;i<n;i++)if(null!==(r=s?l.geometries[i]:l))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(r,u,p,c,d))return!1;break;case"GeometryCollection":for(a=0;a<r.geometries.length;a++)if(!1===t(r.geometries[a],u,p,c,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,u,p,c,d))return!1;u++}}function i(e,t,o){var i=o;return a(e,function(e,a,r,n,l){i=0===a&&void 0===o?e:t(i,e,a,r,n,l)}),i}o.d(t,"a",function(){return i});o(0)},function(e,t,o){"use strict";function a(e,t,o){void 0===o&&(o={});var a={type:"Feature"};return(0===o.id||o.id)&&(a.id=o.id),o.bbox&&(a.bbox=o.bbox),a.properties=t||{},a.geometry=e,a}function i(e,t,o){switch(void 0===o&&(o={}),e){case"Point":return r(t).geometry;case"LineString":return p(t).geometry;case"Polygon":return l(t).geometry;case"MultiPoint":return h(t).geometry;case"MultiLineString":return u(t).geometry;case"MultiPolygon":return f(t).geometry;default:throw new Error(e+" is invalid")}}function r(e,t,o){return void 0===o&&(o={}),a({type:"Point",coordinates:e},t,o)}function n(e,t,o){return void 0===o&&(o={}),d(e.map(function(e){return r(e,t)}),o)}function l(e,t,o){void 0===o&&(o={});for(var i=0,r=e;i<r.length;i++){var n=r[i];if(n.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<n[n.length-1].length;l++)if(n[n.length-1][l]!==n[0][l])throw new Error("First and last Position are not equivalent.")}return a({type:"Polygon",coordinates:e},t,o)}function s(e,t,o){return void 0===o&&(o={}),d(e.map(function(e){return l(e,t)}),o)}function p(e,t,o){if(void 0===o&&(o={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return a({type:"LineString",coordinates:e},t,o)}function c(e,t,o){return void 0===o&&(o={}),d(e.map(function(e){return p(e,t)}),o)}function d(e,t){void 0===t&&(t={});var o={type:"FeatureCollection"};return t.id&&(o.id=t.id),t.bbox&&(o.bbox=t.bbox),o.features=e,o}function u(e,t,o){return void 0===o&&(o={}),a({type:"MultiLineString",coordinates:e},t,o)}function h(e,t,o){return void 0===o&&(o={}),a({type:"MultiPoint",coordinates:e},t,o)}function f(e,t,o){return void 0===o&&(o={}),a({type:"MultiPolygon",coordinates:e},t,o)}function m(e,t,o){return void 0===o&&(o={}),a({type:"GeometryCollection",geometries:e},t,o)}function y(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var o=Math.pow(10,t||0);return Math.round(e*o)/o}function v(e,o){void 0===o&&(o="kilometers");var a=t.factors[o];if(!a)throw new Error(o+" units is invalid");return e*a}function g(e,o){void 0===o&&(o="kilometers");var a=t.factors[o];if(!a)throw new Error(o+" units is invalid");return e/a}function w(e,t){return x(g(e,t))}function b(e){var t=e%360;return t<0&&(t+=360),t}function x(e){return e%(2*Math.PI)*180/Math.PI}function L(e){return e%360*Math.PI/180}function M(e,t,o){if(void 0===t&&(t="kilometers"),void 0===o&&(o="kilometers"),!(e>=0))throw new Error("length must be a positive number");return v(g(e,t),o)}function k(e,o,a){if(void 0===o&&(o="meters"),void 0===a&&(a="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[o];if(!i)throw new Error("invalid original units");var r=t.areaFactors[a];if(!r)throw new Error("invalid final units");return e/i*r}function T(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function P(e){return!!e&&e.constructor===Object}function E(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!T(e))throw new Error("bbox must only contain numbers")})}function _(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}function C(){throw new Error("method has been renamed to `radiansToDegrees`")}function $(){throw new Error("method has been renamed to `degreesToRadians`")}function O(){throw new Error("method has been renamed to `lengthToDegrees`")}function G(){throw new Error("method has been renamed to `lengthToRadians`")}function S(){throw new Error("method has been renamed to `radiansToLength`")}function j(){throw new Error("method has been renamed to `bearingToAzimuth`")}function z(){throw new Error("method has been renamed to `convertLength`")}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=a,t.geometry=i,t.point=r,t.points=n,t.polygon=l,t.polygons=s,t.lineString=p,t.lineStrings=c,t.featureCollection=d,t.multiLineString=u,t.multiPoint=h,t.multiPolygon=f,t.geometryCollection=m,t.round=y,t.radiansToLength=v,t.lengthToRadians=g,t.lengthToDegrees=w,t.bearingToAzimuth=b,t.radiansToDegrees=x,t.degreesToRadians=L,t.convertLength=M,t.convertArea=k,t.isNumber=T,t.isObject=P,t.validateBBox=E,t.validateId=_,t.radians2degrees=C,t.degrees2radians=$,t.distanceToDegrees=O,t.distanceToRadians=G,t.radiansToDistance=S,t.bearingToAngle=j,t.convertDistance=z}])});